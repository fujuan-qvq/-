<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSSÂÜíÈô©Â≤õ - ÂâçÁ´ØÂ≠¶‰π†Ê∏∏Êàè</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e0e0ff;
            position: relative;
            overflow-x: hidden;
        }

        /* ËµõÂçöÊúãÂÖãÁΩëÊ†ºËÉåÊôØ */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(rgba(16, 1, 32, 0.7) 1px, transparent 1px),
                linear-gradient(90deg, rgba(16, 1, 32, 0.7) 1px, transparent 1px);
            background-size: 30px 30px;
            z-index: -1;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 30px); }
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(16, 1, 32, 0.85);
            border-radius: 15px;
            box-shadow: 
                0 0 20px rgba(0, 200, 255, 0.5),
                0 0 40px rgba(0, 200, 255, 0.3),
                inset 0 0 20px rgba(0, 200, 255, 0.2);
            overflow: hidden;
            border: 1px solid #00c8ff;
            position: relative;
        }

        .main-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(90deg, transparent 50%, rgba(0, 200, 255, 0.1) 50%),
                linear-gradient(transparent 50%, rgba(0, 200, 255, 0.1) 50%);
            background-size: 10px 10px;
            pointer-events: none;
            z-index: 1;
        }

        .main-header {
            background: linear-gradient(135deg, #00c8ff, #0099cc);
            color: #fff;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #00ffaa;
            position: relative;
            overflow: hidden;
        }

        .main-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .player-stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
            border: 1px solid rgba(0, 200, 255, 0.5);
            box-shadow: 0 0 10px rgba(0, 200, 255, 0.3);
        }

        .game-navigation {
            display: flex;
            background: rgba(16, 1, 32, 0.7);
            border-bottom: 1px solid #00c8ff;
        }

        .nav-btn {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            color: #b8b8ff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 200, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn:hover {
            background: rgba(0, 200, 255, 0.1);
            color: #00c8ff;
        }

        .nav-btn.active {
            background: rgba(0, 200, 255, 0.2);
            color: #00ffaa;
            border-bottom: 3px solid #00ffaa;
        }

        .game-content {
            display: none;
            padding: 20px;
            min-height: 700px;
        }

        .game-content.active {
            display: block;
        }

        /* CSSË∞∑Ê∏∏ÊàèÊ†∑Âºè */
        .css-valley-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .css-valley-body {
                grid-template-columns: 1fr;
            }
        }

        .scene-container {
            background: rgba(16, 1, 32, 0.7);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #00c8ff;
            box-shadow: 0 0 15px rgba(0, 200, 255, 0.4);
            position: relative;
            overflow: hidden;
        }

        .scene-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(90deg, transparent 49%, rgba(0, 200, 255, 0.1) 50%, transparent 51%),
                linear-gradient(transparent 49%, rgba(0, 200, 255, 0.1) 50%, transparent 51%);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: 1;
        }

        .pixel-scene {
            background: #0a0014;
            border-radius: 8px;
            padding: 15px;
            min-height: 300px;
            position: relative;
            overflow: hidden;
            border: 1px solid #00ffaa;
            box-shadow: inset 0 0 20px rgba(0, 255, 170, 0.3);
        }

        .character-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 20px;
            height: 120px;
        }

        .css-wizard {
            font-size: 60px;
            filter: drop-shadow(0 0 10px #00c8ff);
            animation: wizardFloat 4s infinite;
        }

        .css-creature {
            font-size: 50px;
            filter: drop-shadow(0 0 10px #00ffaa);
            animation: creaturePulse 3s infinite;
        }

        @keyframes wizardFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes creaturePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pixel-art {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 2px;
            margin-bottom: 15px;
        }

        .pixel {
            width: 20px;
            height: 20px;
            background: #1a3a5f;
            border-radius: 2px;
            transition: all 0.3s;
        }

        .pixel.active {
            background: #00c8ff;
            box-shadow: 0 0 10px #00c8ff;
        }

        .layout-demo {
            background: linear-gradient(135deg, #00c8ff, #0099cc);
            width: 120px;
            height: 80px;
            margin: 10px auto;
            position: relative;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0, 200, 255, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
            text-align: center;
        }

        .task-container {
            background: rgba(16, 1, 32, 0.7);
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #00ffaa;
            box-shadow: 0 0 15px rgba(0, 255, 170, 0.3);
        }

        .task-title {
            color: #00ffaa;
            margin-bottom: 10px;
            font-size: 1.3em;
            border-bottom: 2px solid rgba(0, 200, 255, 0.5);
            padding-bottom: 8px;
            text-shadow: 0 0 10px rgba(0, 255, 170, 0.7);
        }

        .task-description {
            background: rgba(26, 58, 95, 0.5);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid rgba(0, 200, 255, 0.3);
            font-size: 0.95em;
        }

        .task-steps {
            margin: 10px 0;
            padding-left: 18px;
            font-size: 0.9em;
        }

        .task-steps li {
            margin: 6px 0;
            color: #b8b8ff;
        }

        .code-editor {
            background: #0a0014;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            color: #00ffaa;
            border: 1px solid #00ffaa;
            box-shadow: 0 0 15px rgba(0, 255, 170, 0.3);
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            color: #b8b8ff;
            font-size: 0.9em;
        }

        textarea.code-area {
            width: 100%;
            height: 400px;
            background: #050010;
            border: 1px solid #00c8ff;
            border-radius: 5px;
            padding: 15px;
            color: #00ffaa;
            font-family: 'Courier New', monospace;
            resize: vertical;
            font-size: 14px;
            line-height: 1.5;
            box-shadow: inset 0 0 10px rgba(0, 200, 255, 0.3);
        }

        .fairy-assistant {
            background: linear-gradient(135deg, #00c8ff, #0099cc);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: white;
            border: 1px solid #aaffee;
            box-shadow: 0 0 15px rgba(170, 255, 238, 0.5);
            position: relative;
            overflow: hidden;
        }

        .fairy-assistant::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.2) 0%, transparent 50%);
            pointer-events: none;
        }

        .fairy-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .fairy-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #aaffee, #00c8ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1a3a5f;
            box-shadow: 0 0 15px #aaffee;
            font-size: 1.2em;
        }

        .help-levels {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .help-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .help-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .help-btn:hover::before {
            left: 100%;
        }

        .help-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .help-btn.level-1 { 
            border-left: 3px solid #aaffaa;
            box-shadow: 0 0 10px rgba(170, 255, 170, 0.5);
        }
        .help-btn.level-2 { 
            border-left: 3px solid #ffffaa;
            box-shadow: 0 0 10px rgba(255, 255, 170, 0.5);
        }
        .help-btn.level-3 { 
            border-left: 3px solid #ffaaaa;
            box-shadow: 0 0 10px rgba(255, 170, 170, 0.5);
        }

        .fairy-response {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.9em;
            display: none;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
        }

        .code-snippet {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            margin: 8px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            line-height: 1.4;
            white-space: pre-wrap;
            color: #aaffee;
            border: 1px solid rgba(170, 255, 238, 0.3);
        }

        .insert-code-btn {
            background: linear-gradient(135deg, #00c8ff, #0099cc);
            color: white;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
            margin-top: 8px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(0, 200, 255, 0.5);
        }

        .insert-code-btn:hover {
            background: linear-gradient(135deg, #33d6ff, #33aacc);
            box-shadow: 0 0 15px rgba(0, 200, 255, 0.8);
            transform: translateY(-2px);
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: #00c8ff;
            color: white;
            box-shadow: 0 0 15px rgba(0, 200, 255, 0.5);
        }

        .btn-success {
            background: #00ffaa;
            color: #0a0014;
            box-shadow: 0 0 15px rgba(0, 255, 170, 0.5);
        }

        .btn-warning {
            background: #ffcc00;
            color: #0a0014;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .completion-badge {
            background: linear-gradient(135deg, #00ffaa, #00cc88);
            color: #0a0014;
            padding: 10px 20px;
            border-radius: 20px;
            text-align: center;
            margin-top: 15px;
            display: none;
            animation: pulse 2s infinite;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(0, 255, 170, 0.5);
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(0, 255, 170, 0.5); }
            50% { transform: scale(1.05); box-shadow: 0 0 25px rgba(0, 255, 170, 0.8); }
            100% { transform: scale(1); box-shadow: 0 0 15px rgba(0, 255, 170, 0.5); }
        }

        .gold-coin {
            color: #ffcc00;
            font-weight: bold;
            text-shadow: 0 0 10px #ffcc00;
        }

        .feedback-message {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            display: none;
            font-weight: bold;
        }

        .feedback-success {
            background: rgba(0, 255, 170, 0.2);
            color: #00ffaa;
            border: 1px solid #00ffaa;
            box-shadow: 0 0 10px rgba(0, 255, 170, 0.3);
        }

        .feedback-error {
            background: rgba(255, 0, 0, 0.2);
            color: #ff0000;
            border: 1px solid #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .scene-content {
            color: #b8b8ff;
            text-align: center;
            padding: 20px;
        }

        .css-preview {
            background: rgba(10, 0, 20, 0.7);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            min-height: 150px;
            border: 1px solid #00c8ff;
            color: #b8b8ff;
            text-align: left;
            font-size: 0.9em;
            overflow: auto;
            box-shadow: inset 0 0 10px rgba(0, 200, 255, 0.3);
        }

        /* ÈúìËôπÊñáÂ≠óÊïàÊûú */
        .neon-text {
            text-shadow: 
                0 0 5px #fff,
                0 0 10px #fff,
                0 0 15px #00c8ff,
                0 0 20px #00c8ff,
                0 0 25px #00c8ff;
            animation: neon-flicker 2s infinite alternate;
        }

        @keyframes neon-flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% {
                text-shadow: 
                    0 0 5px #fff,
                    0 0 10px #fff,
                    0 0 15px #00c8ff,
                    0 0 20px #00c8ff,
                    0 0 25px #00c8ff;
            }
            20%, 24%, 55% {
                text-shadow: none;
            }
        }

        /* ËµõÂçöÊúãÂÖãÊâ´ÊèèÁ∫øÊïàÊûú */
        .scanlines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(0, 0, 0, 0.1) 51%
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 2;
        }

        .fairy-sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px white;
            animation: sparkle 2s infinite;
            z-index: 1;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        .layout-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .layout-box {
            width: 80px;
            height: 60px;
            background: rgba(0, 200, 255, 0.3);
            border: 1px solid #00c8ff;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            text-align: center;
            transition: all 0.3s;
        }

        .layout-box:hover {
            background: rgba(0, 200, 255, 0.5);
            transform: scale(1.05);
        }

        /* ÈÄâÊã©Âô®Ëø∑ÂÆ´Ê∏∏ÊàèÊ†∑Âºè */
        .selector-maze-body {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .selector-maze-body {
                grid-template-columns: 1fr;
            }
        }

        .maze-container {
            background: rgba(16, 22, 58, 0.7);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #4a6baf;
            box-shadow: 0 0 15px rgba(74, 107, 175, 0.4);
            position: relative;
            overflow: hidden;
        }

        .maze-scene {
            background: #0a1428;
            border-radius: 8px;
            padding: 15px;
            height: 650px;
            position: relative;
            overflow: hidden;
            border: 1px solid #6f9eff;
            box-shadow: inset 0 0 20px rgba(111, 158, 255, 0.3);
            display: flex;
            flex-direction: column;
        }

        .matching-area {
            display: flex;
            flex: 1;
            gap: 20px;
            height: 100%;
        }

        .spirits-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .selectors-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .spirits-column::-webkit-scrollbar,
        .selectors-column::-webkit-scrollbar {
            width: 8px;
        }

        .spirits-column::-webkit-scrollbar-track,
        .selectors-column::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .spirits-column::-webkit-scrollbar-thumb,
        .selectors-column::-webkit-scrollbar-thumb {
            background: #6f9eff;
            border-radius: 4px;
        }

        .spirit {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-height: 80px;
        }

        .spirit.correct {
            border-color: #4dff88;
            box-shadow: 0 0 15px rgba(77, 255, 136, 0.5);
            animation: pulse 1.5s infinite;
        }

        .spirit.incorrect {
            border-color: #ff4d4d;
            box-shadow: 0 0 15px rgba(255, 77, 77, 0.5);
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .spirit-icon {
            font-size: 24px;
            margin-right: 12px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
        }

        .spirit-info {
            flex: 1;
        }

        .spirit-name {
            font-weight: bold;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .spirit-code {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #b8b8ff;
            background: rgba(0, 0, 0, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }

        .spirit-dropzone {
            width: 100px;
            height: 40px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 12px;
            transition: all 0.3s ease;
            font-size: 10px;
            text-align: center;
            padding: 4px;
        }

        .spirit-dropzone.hover {
            border-color: #6f9eff;
            background: rgba(111, 158, 255, 0.1);
        }

        .spirit-dropzone.correct {
            border-color: #4dff88;
            background: rgba(77, 255, 136, 0.1);
        }

        .selector-card {
            padding: 12px;
            background: rgba(42, 58, 114, 0.5);
            border-radius: 8px;
            border: 2px solid rgba(111, 158, 255, 0.5);
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
            min-height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .selector-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .selector-card:active {
            cursor: grabbing;
        }

        .selector-card.dragging {
            opacity: 0.7;
            transform: scale(1.03);
        }

        .selector-name {
            font-weight: bold;
            margin-bottom: 4px;
            color: #6f9eff;
            font-size: 12px;
        }

        .selector-code {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.3);
            padding: 6px 10px;
            border-radius: 4px;
            display: inline-block;
        }

        .selector-task-container {
            background: rgba(16, 22, 58, 0.7);
            border-radius: 10px;
            padding: 15px;
            border-left: 5px solid #6f9eff;
            box-shadow: 0 0 15px rgba(111, 158, 255, 0.3);
            display: flex;
            flex-direction: column;
        }

        .selector-task-title {
            color: #6f9eff;
            margin-bottom: 8px;
            font-size: 1.2em;
            border-bottom: 2px solid rgba(111, 158, 255, 0.5);
            padding-bottom: 6px;
            text-shadow: 0 0 10px rgba(111, 158, 255, 0.7);
        }

        .target-styles {
            background: rgba(42, 58, 114, 0.5);
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #6f9eff;
            flex: 1;
            overflow-y: auto;
        }

        .target-item {
            display: flex;
            align-items: center;
            margin: 6px 0;
            padding: 6px;
            border-radius: 4px;
            background: rgba(0, 0, 0, 0.3);
            font-size: 12px;
        }

        .target-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
            flex-shrink: 0;
        }

        .target-color.red {
            background: #ff4d4d;
            box-shadow: 0 0 8px #ff4d4d;
        }

        .target-color.blue {
            background: #4d79ff;
            box-shadow: 0 0 8px #4d79ff;
        }

        .target-color.green {
            background: #4dff88;
            box-shadow: 0 0 8px #4dff88;
        }

        .target-color.orange {
            background: #ffa64d;
            box-shadow: 0 0 8px #ffa64d;
        }

        .target-color.purple {
            background: #b84dff;
            box-shadow: 0 0 8px #b84dff;
        }

        .selector-controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        .selector-completion-badge {
            background: linear-gradient(135deg, #4dff88, #00cc66);
            color: #0a1428;
            padding: 8px 15px;
            border-radius: 15px;
            text-align: center;
            margin-top: 10px;
            display: none;
            animation: pulse 2s infinite;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(77, 255, 136, 0.5);
            font-size: 12px;
        }

        .selector-feedback-message {
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
            text-align: center;
            display: none;
            font-weight: bold;
            font-size: 12px;
        }

        .selector-feedback-success {
            background: rgba(77, 255, 136, 0.2);
            color: #4dff88;
            border: 1px solid #4dff88;
            box-shadow: 0 0 8px rgba(77, 255, 136, 0.3);
        }

        .selector-feedback-error {
            background: rgba(255, 77, 77, 0.2);
            color: #ff4d4d;
            border: 1px solid #ff4d4d;
            box-shadow: 0 0 8px rgba(255, 77, 77, 0.3);
        }

        .hint-panel {
            background: rgba(42, 58, 114, 0.5);
            border-radius: 6px;
            padding: 8px;
            margin: 8px 0;
            border: 1px solid #6f9eff;
            text-align: center;
        }

        .hint-panel .hint-text {
            color: #b8b8ff;
            font-size: 11px;
        }

        .selector-info {
            background: rgba(42, 58, 114, 0.5);
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #6f9eff;
            flex: 1;
            overflow-y: auto;
        }

        .selector-info h3 {
            color: #6f9eff;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .selector-info ul {
            padding-left: 15px;
        }

        .selector-info li {
            margin: 4px 0;
            color: #b8b8ff;
            font-size: 11px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4d79ff, #6f9eff);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .match-feedback {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: bold;
            z-index: 10;
            display: none;
            animation: floatUp 1.5s ease;
            font-size: 12px;
        }

        @keyframes floatUp {
            0% { opacity: 0; transform: translate(-50%, -30%); }
            50% { opacity: 1; transform: translate(-50%, -50%); }
            100% { opacity: 0; transform: translate(-50%, -70%); }
        }

        .match-success {
            background: rgba(77, 255, 136, 0.9);
            color: #0a1428;
            box-shadow: 0 0 12px rgba(77, 255, 136, 0.7);
        }

        .match-error {
            background: rgba(255, 77, 77, 0.9);
            color: white;
            box-shadow: 0 0 12px rgba(255, 77, 77, 0.7);
        }

        .level-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(111, 158, 255, 0.3);
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: bold;
            border: 1px solid #6f9eff;
            box-shadow: 0 0 8px #6f9eff;
            font-size: 12px;
        }

        .section-title {
            color: #6f9eff;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: bold;
        }

        /* È™åËØÅÊ®°ÂùóÊ†∑Âºè */
        .validation-temple-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .validation-temple-body {
                grid-template-columns: 1fr;
            }
        }

        .temple-scene {
            background: rgba(16, 1, 32, 0.7);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.4);
            position: relative;
            overflow: hidden;
        }

        .temple-scene::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(90deg, transparent 49%, rgba(255, 107, 107, 0.1) 50%, transparent 51%),
                linear-gradient(transparent 49%, rgba(255, 107, 107, 0.1) 50%, transparent 51%);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: 1;
        }

        .temple-interior {
            background: #0a0014;
            border-radius: 8px;
            padding: 15px;
            min-height: 300px;
            position: relative;
            overflow: hidden;
            border: 1px solid #ff6b6b;
            box-shadow: inset 0 0 20px rgba(255, 107, 107, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

        .temple-guardian {
            font-size: 80px;
            filter: drop-shadow(0 0 10px #ff6b6b);
            animation: guardianFloat 4s infinite;
            margin-bottom: 20px;
        }

        @keyframes guardianFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(5deg); }
            75% { transform: translateY(5px) rotate(-5deg); }
        }

        .temple-content {
            color: #b8b8ff;
            text-align: center;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .temple-task-container {
            background: rgba(16, 1, 32, 0.7);
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.3);
        }

        .temple-task-title {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 1.3em;
            border-bottom: 2px solid rgba(255, 107, 107, 0.5);
            padding-bottom: 8px;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.7);
        }

        /* È™åËØÅÈù¢ÊùøÊ†∑Âºè */
        .validation-panel {
            background: rgba(26, 58, 95, 0.5);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .validation-panel h3 {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .validation-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .validation-tab {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 5px;
            color: #b8b8ff;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .validation-tab:hover {
            background: rgba(255, 107, 107, 0.1);
        }

        .validation-tab.active {
            background: rgba(255, 107, 107, 0.2);
            border-color: #ff6b6b;
            color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .validation-content {
            display: none;
        }

        .validation-content.active {
            display: block;
        }

        .validation-checklist {
            list-style: none;
            margin: 10px 0;
        }

        .validation-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }

        .validation-item:hover {
            background: rgba(255, 107, 107, 0.1);
        }

        .validation-item input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            accent-color: #ff6b6b;
        }

        .validation-item label {
            flex: 1;
            color: #b8b8ff;
            font-size: 0.95em;
        }

        .validation-item.completed label {
            color: #4dff88;
            text-decoration: line-through;
        }

        .validation-fairy {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: white;
            border: 1px solid #ffcccc;
            box-shadow: 0 0 15px rgba(255, 204, 204, 0.5);
            position: relative;
            overflow: hidden;
        }

        .validation-fairy::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.2) 0%, transparent 50%);
            pointer-events: none;
        }

        .validation-fairy-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .validation-fairy-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ffcccc, #ff6b6b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1a3a5f;
            box-shadow: 0 0 15px #ffcccc;
            font-size: 1.2em;
        }

        .validation-help-levels {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 10px 0;
        }

        .validation-help-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
            text-align: left;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .validation-help-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .validation-help-btn:hover::before {
            left: 100%;
        }

        .validation-help-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(5px);
        }

        .validation-help-btn.level-1 { 
            border-left: 3px solid #aaffaa;
            box-shadow: 0 0 10px rgba(170, 255, 170, 0.5);
        }
        .validation-help-btn.level-2 { 
            border-left: 3px solid #ffffaa;
            box-shadow: 0 0 10px rgba(255, 255, 170, 0.5);
        }
        .validation-help-btn.level-3 { 
            border-left: 3px solid #ffaaaa;
            box-shadow: 0 0 10px rgba(255, 170, 170, 0.5);
        }

        .validation-fairy-response {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.9em;
            display: none;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
        }

        .validation-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .validation-completion-badge {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: #0a0014;
            padding: 10px 20px;
            border-radius: 20px;
            text-align: center;
            margin-top: 15px;
            display: none;
            animation: pulse 2s infinite;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
        }

        .validation-feedback-message {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            display: none;
            font-weight: bold;
        }

        .validation-feedback-success {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.3);
        }

        .validation-feedback-error {
            background: rgba(255, 0, 0, 0.2);
            color: #ff0000;
            border: 1px solid #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        /* Êñ∞ÊâãÂºïÂØºÊ†∑Âºè */
        .tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
        }

        .tutorial-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(16, 1, 32, 0.95);
            border-radius: 15px;
            padding: 25px;
            max-width: 500px;
            width: 90%;
            border: 2px solid #00c8ff;
            box-shadow: 0 0 30px rgba(0, 200, 255, 0.7);
            z-index: 1001;
            display: none;
        }

        .tutorial-title {
            color: #00ffaa;
            margin-bottom: 15px;
            font-size: 1.5em;
            text-align: center;
            text-shadow: 0 0 10px #00ffaa;
        }

        .tutorial-content {
            color: #b8b8ff;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .tutorial-highlight {
            position: absolute;
            border: 2px solid #00ffaa;
            border-radius: 8px;
            box-shadow: 0 0 20px #00ffaa;
            z-index: 999;
            pointer-events: none;
            animation: highlightPulse 2s infinite;
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 20px #00ffaa; }
            50% { box-shadow: 0 0 30px #00ffaa; }
            100% { box-shadow: 0 0 20px #00ffaa; }
        }

        .tutorial-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .tutorial-progress {
            color: #b8b8ff;
            font-size: 0.9em;
        }

        .tutorial-skip {
            background: transparent;
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tutorial-skip:hover {
            background: rgba(255, 107, 107, 0.1);
        }

        .tutorial-next {
            background: #00c8ff;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(0, 200, 255, 0.5);
        }

        .tutorial-next:hover {
            background: #33d6ff;
            box-shadow: 0 0 15px rgba(0, 200, 255, 0.8);
        }

        .next-game-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
            margin-top: 15px;
            display: inline-block;
        }

        .next-game-btn:hover {
            background: linear-gradient(135deg, #ff8e8e, #ff6b6b);
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.8);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Êñ∞ÊâãÂºïÂØº -->
    <div class="tutorial-overlay" id="tutorial-overlay"></div>
    <div class="tutorial-popup" id="tutorial-popup">
        <h2 class="tutorial-title" id="tutorial-title">Ê¨¢ËøéÊù•Âà∞CSSÂÜíÈô©Â≤õÔºÅ</h2>
        <div class="tutorial-content" id="tutorial-content">
            Âú®ËøôÈáåÔºå‰Ω†Â∞ÜÂ≠¶‰π†CSSÁü•ËØÜÔºåËß£ÂÜ≥ÂêÑÁßçÊúâË∂£ÁöÑÊåëÊàòÔºÅ
        </div>
        <div class="tutorial-navigation">
            <button class="tutorial-skip" id="tutorial-skip">Ë∑≥ËøáÂºïÂØº</button>
            <div class="tutorial-progress" id="tutorial-progress">1/6</div>
            <button class="tutorial-next" id="tutorial-next">‰∏ã‰∏ÄÊ≠•</button>
        </div>
    </div>
    <div class="tutorial-highlight" id="tutorial-highlight"></div>

    <div class="main-container">
        <div class="scanlines"></div>
        <div class="main-header">
            <div class="header-content">
                <h1 class="neon-text">üèûÔ∏è CSSÂÜíÈô©Â≤õ</h1>
                <div class="player-stats">
                    <div class="stat">Ê∏∏Êàè: <span id="current-game">CSSË∞∑</span></div>
                    <div class="stat">ÈáëÂ∏Å: <span class="gold-coin" id="gold-count">10</span> ü™ô</div>
                    <div class="stat">ËøõÂ∫¶: <span id="progress">0%</span></div>
                </div>
            </div>
        </div>

        <div class="game-navigation">
            <button class="nav-btn active" data-game="css-valley">üèûÔ∏è CSSË∞∑</button>
            <button class="nav-btn" data-game="selector-maze">üå≤ ÈÄâÊã©Âô®Ëø∑ÂÆ´</button>
            <button class="nav-btn" data-game="validation-temple">üèõÔ∏è È™åËØÅÁ•ûÊÆø</button>
        </div>

        <!-- CSSË∞∑Ê∏∏Êàè -->
        <div class="game-content active" id="css-valley">
            <div class="css-valley-body">
                <!-- Â∑¶‰æßÔºöÊ∏∏ÊàèÂú∫ÊôØ -->
                <div class="scene-container">
                    <h2>üñºÔ∏è Â∏ÉÂ±ÄÈ¢ÑËßà</h2>
                    <div class="pixel-scene">
                        <div class="character-container">
                            <div class="css-wizard">üßô‚Äç‚ôÇÔ∏è</div>
                            <div class="css-creature">üêô</div>
                        </div>
                        <div class="pixel-art">
                            <div class="pixel"></div><div class="pixel"></div><div class="pixel active"></div><div class="pixel"></div><div class="pixel"></div><div class="pixel"></div><div class="pixel"></div><div class="pixel"></div>
                        </div>
                        <div class="layout-demo">FlexÂ∏ÉÂ±ÄÊºîÁ§∫</div>
                        <div class="scene-content">
                            <h3>Ê¨¢ËøéÊù•Âà∞CSSË∞∑ÔºÅ</h3>
                            <p>CSSÈ≠îÊ≥ïÂá∫Áé∞‰∫ÜÊ∑∑‰π±ÔºÅ‰ΩøÁî®CSSÂ∏ÉÂ±Ä‰øÆÂ§çÊ†∑ÂºèÈóÆÈ¢ò...</p>
                        </div>
                        <div class="layout-preview">
                            <div class="layout-box">Box 1</div>
                            <div class="layout-box">Box 2</div>
                            <div class="layout-box">Box 3</div>
                            <div class="layout-box">Box 4</div>
                        </div>
                        <div class="css-preview" id="css-preview">
                            <!-- CSSÈ¢ÑËßàÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                        </div>
                    </div>
                </div>

                <!-- Âè≥‰æßÔºö‰ªªÂä°Âíå‰ª£Á†ÅÁºñËæë -->
                <div class="task-container">
                    <h2 class="task-title">üìù ‰ªªÂä°ÁõÆÊ†á</h2>
                    <div class="task-description">
                        <p>CSSË∞∑ÁöÑÊ†∑ÂºèÁ≥ªÁªüÂá∫Áé∞‰∫ÜÊ∑∑‰π±ÔºÅËØ∑‰ΩøÁî®CSS‰øÆÂ§ç‰ª•‰∏ãÂ∏ÉÂ±ÄÈóÆÈ¢òÔºö</p>
                        <ul class="task-steps">
                            <li>‰ΩøÁî®FlexboxÂàõÂª∫ÂØºËà™Ê†èÂ∏ÉÂ±Ä</li>
                            <li>ÂÆûÁé∞Âç°ÁâáÁªÑ‰ª∂ÁöÑÁ≠âÂàÜÂ∏ÉÂ±Ä</li>
                            <li>Ê∑ªÂä†ÂìçÂ∫îÂºèËÆæËÆ°ÔºàÁßªÂä®Á´ØÈÄÇÈÖçÔºâ</li>
                            <li>ÂàõÂª∫‰∫§‰∫íÂä®ÁîªÊïàÊûú</li>
                            <li>Á°Æ‰øùËâ≤ÂΩ©Êê≠ÈÖçÂçèË∞É</li>
                        </ul>
                    </div>

                    <div class="code-editor">
                        <div class="editor-header">
                            <span>üé® style.css</span>
                            <span>CSSÊ†∑Âºè</span>
                        </div>
                        <textarea class="code-area" id="css-code" placeholder="Âú®ËøôÈáåÁºñÂÜô‰Ω†ÁöÑCSS‰ª£Á†Å...">
/* CSSË∞∑Ê†∑ÂºèÊåëÊàò */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* ÂØºËà™Ê†èÊ†∑Âºè - ‰ΩøÁî®FlexboxÂ∏ÉÂ±Ä */
.navbar {
    /* Âú®ËøôÈáåÊ∑ªÂä†FlexboxÊ†∑Âºè */
}

.nav-links {
    /* ÂØºËà™ÈìæÊé•Ê†∑Âºè */
}

.nav-links a {
    /* ÈìæÊé•Ê†∑Âºè */
}

/* Âç°ÁâáÂ∏ÉÂ±Ä */
.cards {
    /* Âç°ÁâáÂÆπÂô®Â∏ÉÂ±Ä */
}

.card {
    /* Âçï‰∏™Âç°ÁâáÊ†∑Âºè */
}

.card:hover {
    /* Âç°ÁâáÊÇ¨ÂÅúÊïàÊûú */
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
    /* ÁßªÂä®Á´ØÊ†∑Âºè */
}</textarea>
                    </div>

                    <div class="fairy-assistant">
                        <div class="fairy-header">
                            <div class="fairy-avatar">üßö‚Äç‚ôÄÔ∏è</div>
                            <h3>‰ªôÂ•≥‰∏ãÂá°</h3>
                        </div>
                        <p>üßö‚Äç‚ôÄÔ∏è ÈÅáÂà∞Âõ∞ÈöæÂêóÔºüËØ∑‰Ω†ÊîØ‰ªòÈáëÂ∏ÅÁªôÊàë</p>
                        <div class="help-levels">
                            <button class="help-btn level-1" onclick="getHelp(1)">
                                üí° Á∫øÁ¥¢ÊèêÁ§∫ (1ü™ô)
                            </button>
                            <button class="help-btn level-2" onclick="getHelp(2)">
                                üéØ ÊÄùË∑ØÊåáÂØº (2ü™ô)
                            </button>
                            <button class="help-btn level-3" onclick="getHelp(3)">
                                üîß ÂÆåÊï¥‰ª£Á†Å (3ü™ô)
                            </button>
                        </div>
                        <div class="fairy-response" id="fairy-response">
                            <!-- ‰ªôÂ•≥ÂõûÂ§çÂÜÖÂÆπ -->
                        </div>
                    </div>

                    <div class="controls">
                        <button class="btn btn-warning" onclick="resetCode()">üîÑ ÈáçÁΩÆ‰ª£Á†Å</button>
                        <button class="btn btn-primary" onclick="testCode()">üß™ ÊµãËØï‰ª£Á†Å</button>
                        <button class="btn btn-success" onclick="submitCode()">üöÄ Êèê‰∫§ÂÖ≥Âç°</button>
                    </div>

                    <div class="completion-badge" id="completion-badge">
                        ‚úÖ Ê†∑Âºè‰øÆÂ§çÂÆåÊàêÔºÅÂáÜÂ§áÂâçÂæÄ‰∏ã‰∏ÄÂÖ≥...
                    </div>
                </div>
            </div>
        </div>

        <!-- ÈÄâÊã©Âô®Ëø∑ÂÆ´Ê∏∏Êàè -->
        <div class="game-content" id="selector-maze">
            <div class="selector-maze-body">
                <!-- Â∑¶‰æßÔºöÂåπÈÖçÂå∫Âüü -->
                <div class="maze-container">
                    <h2>üå≤ HTMLÊ£ÆÊûóËø∑ÂÆ´</h2>
                    <div class="maze-scene">
                        <div class="level-indicator">ÂÖ≥Âç° <span id="level-display">1</span></div>
                        <div class="matching-area">
                            <div class="spirits-column">
                                <div class="section-title">Ê†áÁ≠æÁ≤æÁÅµ (5‰∏™)</div>
                                <div class="spirit-container" id="spirit-container">
                                    <!-- Á≤æÁÅµÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                            <div class="selectors-column">
                                <div class="section-title">ÈÄâÊã©Âô®Âç°Áâá</div>
                                <div class="selector-cards" id="selector-cards">
                                    <!-- ÈÄâÊã©Âô®Âç°ÁâáÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Âè≥‰æßÔºö‰ªªÂä°ÂíåËØ¥Êòé -->
                <div class="selector-task-container">
                    <h2 class="selector-task-title">üéØ ‰ªªÂä°ÁõÆÊ†á</h2>
                    <div class="task-description">
                        <p style="font-size: 12px; margin-bottom: 8px;">Â∞ÜÊ≠£Á°ÆÁöÑÈÄâÊã©Âô®ÊãñÂà∞ÂØπÂ∫îÁöÑÊ†áÁ≠æÁ≤æÁÅµ‰∏ä</p>
                        
                        <div class="target-styles" id="target-styles">
                            <!-- ÁõÆÊ†áÊ†∑ÂºèÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                        </div>

                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>

                    <div class="hint-panel">
                        <div class="hint-text" id="current-hint">ËßÇÂØüÁ≤æÁÅµÁöÑHTML‰ª£Á†ÅÔºåÈÄâÊã©Ê≠£Á°ÆÁöÑÈÄâÊã©Âô®</div>
                    </div>

                    <div class="selector-info">
                        <h3>üìö ÈÄâÊã©Âô®Áü•ËØÜ</h3>
                        <ul>
                            <li><strong>ÂÖÉÁ¥†ÈÄâÊã©Âô®</strong>Ôºöp { } - ÈÄâÊã©ÊâÄÊúâ &lt;p&gt; ÂÖÉÁ¥†</li>
                            <li><strong>Á±ªÈÄâÊã©Âô®</strong>Ôºö.active { } - ÈÄâÊã©ÊâÄÊúâ class="active" ÁöÑÂÖÉÁ¥†</li>
                            <li><strong>IDÈÄâÊã©Âô®</strong>Ôºö#logo { } - ÈÄâÊã© id="logo" ÁöÑÂÖÉÁ¥†</li>
                            <li><strong>Â±ûÊÄßÈÄâÊã©Âô®</strong>Ôºö[type="text"] { } - ÈÄâÊã©ÂÖ∑ÊúâÁâπÂÆöÂ±ûÊÄßÁöÑÂÖÉÁ¥†</li>
                            <li><strong>‰º™Á±ªÈÄâÊã©Âô®</strong>Ôºö:hover { } - ÈÄâÊã©ÁâπÂÆöÁä∂ÊÄÅÁöÑÂÖÉÁ¥†</li>
                        </ul>
                    </div>

                    <div class="selector-controls">
                        <button class="btn btn-warning" onclick="resetSelectorGame()">üîÑ ÈáçÁΩÆ</button>
                        <button class="btn btn-primary" onclick="nextSelectorLevel()">‚û°Ô∏è ‰∏ã‰∏ÄÂÖ≥</button>
                        <button class="btn btn-success" onclick="checkAllSelectorMatches()">‚úÖ Ê£ÄÊü•</button>
                    </div>

                    <div class="selector-completion-badge" id="selector-completion-badge">
                        ‚úÖ ÊÅ≠ÂñúÔºÅËé∑Âæó"ÈÄâÊã©Âô®ÊçïÁΩë"ÈÅìÂÖ∑ÔºÅ
                    </div>

                    <div class="selector-feedback-message" id="selector-feedback-message">
                        <!-- ÂèçÈ¶àÊ∂àÊÅØÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- È™åËØÅÁ•ûÊÆøÊ∏∏Êàè -->
        <div class="game-content" id="validation-temple">
            <div class="validation-temple-body">
                <!-- Â∑¶‰æßÔºöÊ∏∏ÊàèÂú∫ÊôØ -->
                <div class="temple-scene">
                    <h2>üèõÔ∏è È™åËØÅÁ•ûÊÆø</h2>
                    <div class="temple-interior">
                        <div class="temple-guardian">üóø</div>
                        <div class="temple-content">
                            <h3>Áü•ËØÜÈ™åËØÅ‰∏≠ÂøÉ</h3>
                            <p>Âú®ËøôÈáåÔºå‰Ω†Â∞ÜÈ™åËØÅÂú®CSSË∞∑ÂíåÈÄâÊã©Âô®Ëø∑ÂÆ´‰∏≠Â≠¶Âà∞ÁöÑÁü•ËØÜ</p>
                            <p>ËØÅÊòé‰Ω†Â∑≤ÁªèÊéåÊè°‰∫ÜÂÖ≥ÈîÆÁöÑCSSÊ¶ÇÂøµÔºÅ</p>
                            <div class="progress-bar" style="margin: 15px 0;">
                                <div class="progress-fill" id="validation-progress-fill" style="background: linear-gradient(90deg, #ff6b6b, #ff8e8e);"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                                <div>ÂÖ≥Ê≥®: <span id="validation-focus">1/3</span></div>
                                <div>ÈáëÂ∏Å: <span class="gold-coin">10</span> ü™ô</div>
                                <div>ËøõÂ∫¶: <span id="validation-progress">0%</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Âè≥‰æßÔºöÈ™åËØÅÈù¢Êùø -->
                <div class="temple-task-container">
                    <h2 class="temple-task-title">üìù Áü•ËØÜÈ™åËØÅ</h2>
                    
                    <div class="validation-tabs">
                        <div class="validation-tab active" data-tab="css-valley-validation">CSSË∞∑È™åËØÅ</div>
                        <div class="validation-tab" data-tab="selector-maze-validation">ÈÄâÊã©Âô®Ëø∑ÂÆ´È™åËØÅ</div>
                    </div>

                    <!-- CSSË∞∑È™åËØÅÂÜÖÂÆπ -->
                    <div class="validation-content active" id="css-valley-validation">
                        <div class="validation-panel">
                            <h3>CSSÂ∏ÉÂ±ÄÁü•ËØÜÈ™åËØÅ</h3>
                            <p>È™åËØÅ‰Ω†Âú®CSSË∞∑‰∏≠Â≠¶Âà∞ÁöÑÂ∏ÉÂ±ÄÁü•ËØÜ</p>
                            
                            <ul class="validation-checklist" id="css-valley-checklist">
                                <li class="validation-item">
                                    <input type="checkbox" id="css-check1">
                                    <label for="css-check1">FlexboxÂ∏ÉÂ±ÄÔºöÁêÜËß£display: flexÁöÑ‰ΩøÁî®</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="css-check2">
                                    <label for="css-check2">ÂìçÂ∫îÂºèËÆæËÆ°ÔºöÊéåÊè°@mediaÊü•ËØ¢ÁöÑ‰ΩøÁî®</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="css-check3">
                                    <label for="css-check3">CSSÂä®ÁîªÔºöÁêÜËß£transitionÂíåtransform</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="css-check4">
                                    <label for="css-check4">Â∏ÉÂ±ÄÂ±ûÊÄßÔºöÊéåÊè°justify-contentÂíåalign-items</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="css-check5">
                                    <label for="css-check5">ÁõíÂ≠êÊ®°ÂûãÔºöÁêÜËß£margin„ÄÅpaddingÂíåborder</label>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- ÈÄâÊã©Âô®Ëø∑ÂÆ´È™åËØÅÂÜÖÂÆπ -->
                    <div class="validation-content" id="selector-maze-validation">
                        <div class="validation-panel">
                            <h3>CSSÈÄâÊã©Âô®Áü•ËØÜÈ™åËØÅ</h3>
                            <p>È™åËØÅ‰Ω†Âú®ÈÄâÊã©Âô®Ëø∑ÂÆ´‰∏≠Â≠¶Âà∞ÁöÑÈÄâÊã©Âô®Áü•ËØÜ</p>
                            
                            <ul class="validation-checklist" id="selector-maze-checklist">
                                <li class="validation-item">
                                    <input type="checkbox" id="selector-check1">
                                    <label for="selector-check1">ÂÖÉÁ¥†ÈÄâÊã©Âô®ÔºöÁêÜËß£p„ÄÅdivÁ≠âÂü∫Êú¨ÈÄâÊã©Âô®</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="selector-check2">
                                    <label for="selector-check2">Á±ªÈÄâÊã©Âô®ÔºöÊéåÊè°.classnameÁöÑ‰ΩøÁî®</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="selector-check3">
                                    <label for="selector-check3">IDÈÄâÊã©Âô®ÔºöÁêÜËß£#idnameÁöÑ‰ΩøÁî®</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="selector-check4">
                                    <label for="selector-check4">Â±ûÊÄßÈÄâÊã©Âô®ÔºöÊéåÊè°[attribute=value]ÁöÑ‰ΩøÁî®</label>
                                </li>
                                <li class="validation-item">
                                    <input type="checkbox" id="selector-check5">
                                    <label for="selector-check5">‰º™Á±ªÈÄâÊã©Âô®ÔºöÁêÜËß£:hover„ÄÅ:first-childÁ≠â</label>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="validation-fairy">
                        <div class="validation-fairy-header">
                            <div class="validation-fairy-avatar">üßö‚Äç‚ôÄÔ∏è</div>
                            <h3>‰ªôÂ•≥‰∏ãÂá°</h3>
                        </div>
                        <p>üßö‚Äç‚ôÄÔ∏è ÈÅáÂà∞Âõ∞ÈöæÂêóÔºüËØ∑‰Ω†ÊîØ‰ªòÈáëÂ∏ÅÁªôÊàë</p>
                        <div class="validation-help-levels">
                            <button class="validation-help-btn level-1" onclick="getValidationHelp(1)">
                                <span>üí° Á∫øÁ¥¢ÊèêÁ§∫</span>
                                <span>(1ü™ô)</span>
                            </button>
                            <button class="validation-help-btn level-2" onclick="getValidationHelp(2)">
                                <span>üéØ ÊÄùË∑ØÊåáÂØº</span>
                                <span>(2ü™ô)</span>
                            </button>
                            <button class="validation-help-btn level-3" onclick="getValidationHelp(3)">
                                <span>üîß ÂÆåÊï¥‰ª£Á†Å</span>
                                <span>(3ü™ô)</span>
                            </button>
                        </div>
                        <div class="validation-fairy-response" id="validation-fairy-response">
                            <!-- ‰ªôÂ•≥ÂõûÂ§çÂÜÖÂÆπ -->
                        </div>
                    </div>

                    <div class="validation-controls">
                        <button class="btn btn-warning" onclick="resetValidationGame()">üîÑ ÈáçÁΩÆÈ™åËØÅ</button>
                        <button class="btn btn-primary" onclick="runValidation()">üß™ ËøêË°åÈ™åËØÅ</button>
                        <button class="btn btn-success" onclick="completeValidation()">‚úÖ ÂÆåÊàêÈ™åËØÅ</button>
                    </div>

                    <div class="validation-completion-badge" id="validation-completion-badge">
                        ‚úÖ È™åËØÅÂÆåÊàêÔºÅÊÅ≠Âñú‰Ω†ÊéåÊè°‰∫ÜCSSÊ†∏ÂøÉÁü•ËØÜÔºÅ
                    </div>

                    <div class="validation-feedback-message" id="validation-feedback-message">
                        <!-- ÂèçÈ¶àÊ∂àÊÅØÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÂÖ®Â±ÄÊ∏∏ÊàèÁä∂ÊÄÅ
        const globalState = {
            goldCoins: 10,
            currentGame: 'css-valley',
            cssValleyProgress: 0,
            selectorMazeProgress: 0,
            validationTempleProgress: 0,
            tutorialCompleted: false
        };

        // CSSË∞∑Ê∏∏ÊàèÁä∂ÊÄÅ
        const cssValleyState = {
            progress: 0
        };

        // ÈÄâÊã©Âô®Ëø∑ÂÆ´Ê∏∏ÊàèÁä∂ÊÄÅ
        const selectorMazeState = {
            matchedSpirits: 0,
            totalSpirits: 5,
            score: 0,
            currentLevel: 1,
            maxLevels: 5,
            spiritMatches: {},
            currentSpirits: [],
            currentSelectors: []
        };

        // È™åËØÅÁ•ûÊÆøÊ∏∏ÊàèÁä∂ÊÄÅ
        const validationTempleState = {
            completedChecks: 0,
            totalChecks: 10,
            focus: "1/3",
            progress: 0,
            currentTab: 'css-valley-validation'
        };

        // Êñ∞ÊâãÂºïÂØºÁä∂ÊÄÅ
        const tutorialState = {
            currentStep: 0,
            totalSteps: 6,
            steps: [
                {
                    title: "Ê¨¢ËøéÊù•Âà∞CSSÂÜíÈô©Â≤õÔºÅ",
                    content: "Âú®ËøôÈáåÔºå‰Ω†Â∞ÜÂ≠¶‰π†CSSÁü•ËØÜÔºåËß£ÂÜ≥ÂêÑÁßçÊúâË∂£ÁöÑÊåëÊàòÔºÅÂáÜÂ§áÂ•ΩÂºÄÂßãÂÜíÈô©‰∫ÜÂêóÔºü",
                    highlight: null
                },
                {
                    title: "Ê∏∏ÊàèÁïåÈù¢‰ªãÁªç",
                    content: "ËøôÊòØÊ∏∏ÊàèÁöÑ‰∏ªÁïåÈù¢Ôºå‰Ω†ÂèØ‰ª•ÁúãÂà∞ÈáëÂ∏ÅÊï∞Èáè„ÄÅÊ∏∏ÊàèËøõÂ∫¶ÂíåÂΩìÂâçÊ∏∏ÊàèÊ®°Âùó„ÄÇ",
                    highlight: ".player-stats"
                },
                {
                    title: "CSSË∞∑ - Â∏ÉÂ±ÄÂ≠¶‰π†",
                    content: "Âú®CSSË∞∑‰∏≠Ôºå‰Ω†Â∞ÜÂ≠¶‰π†Â¶Ç‰Ωï‰ΩøÁî®CSSÂàõÂª∫ÂìçÂ∫îÂºèÂ∏ÉÂ±ÄÔºåÂåÖÊã¨FlexboxÂíåGridÂ∏ÉÂ±Ä„ÄÇ",
                    highlight: ".nav-btn[data-game='css-valley']"
                },
                {
                    title: "ÈÄâÊã©Âô®Ëø∑ÂÆ´ - CSSÈÄâÊã©Âô®",
                    content: "Âú®ÈÄâÊã©Âô®Ëø∑ÂÆ´‰∏≠Ôºå‰Ω†Â∞ÜÂ≠¶‰π†‰∏çÂêåÁ±ªÂûãÁöÑCSSÈÄâÊã©Âô®Ôºå‰ª•ÂèäÂ¶Ç‰ΩïÊ≠£Á°Æ‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇ",
                    highlight: ".nav-btn[data-game='selector-maze']"
                },
                {
                    title: "È™åËØÅÁ•ûÊÆø - Áü•ËØÜÈ™åËØÅ",
                    content: "Âú®È™åËØÅÁ•ûÊÆø‰∏≠Ôºå‰Ω†ÂèØ‰ª•È™åËØÅÂú®CSSË∞∑ÂíåÈÄâÊã©Âô®Ëø∑ÂÆ´‰∏≠Â≠¶Âà∞ÁöÑÁü•ËØÜÔºåÁ°Æ‰øù‰Ω†Â∑≤ÁªèÊéåÊè°‰∫ÜÂÖ≥ÈîÆÊ¶ÇÂøµ„ÄÇ",
                    highlight: ".nav-btn[data-game='validation-temple']"
                },
                {
                    title: "‰ªôÂ•≥Â∏ÆÂä©Á≥ªÁªü",
                    content: "ÈÅáÂà∞Âõ∞ÈöæÊó∂ÔºåÂèØ‰ª•‰ΩøÁî®‰ªôÂ•≥Â∏ÆÂä©Á≥ªÁªü„ÄÇ‰ΩÜËØ∑Ê≥®ÊÑèÔºåÂ∏ÆÂä©ÈúÄË¶ÅÊ∂àËÄóÈáëÂ∏ÅÔºÅ",
                    highlight: ".fairy-assistant"
                }
            ]
        };

        // ÊâÄÊúâÂèØËÉΩÁöÑÈÄâÊã©Âô®ÂíåÁ≤æÁÅµÁ±ªÂûã
        const allSelectors = [
            { type: 'element', code: 'p', name: 'ÂÖÉÁ¥†ÈÄâÊã©Âô®', color: '#ff4d4d' },
            { type: 'element', code: 'h1', name: 'ÂÖÉÁ¥†ÈÄâÊã©Âô®', color: '#ff4d4d' },
            { type: 'element', code: 'div', name: 'ÂÖÉÁ¥†ÈÄâÊã©Âô®', color: '#ff4d4d' },
            { type: 'element', code: 'span', name: 'ÂÖÉÁ¥†ÈÄâÊã©Âô®', color: '#ff4d4d' },
            { type: 'element', code: 'a', name: 'ÂÖÉÁ¥†ÈÄâÊã©Âô®', color: '#ff4d4d' },
            { type: 'class', code: '.active', name: 'Á±ªÈÄâÊã©Âô®', color: '#4d79ff' },
            { type: 'class', code: '.container', name: 'Á±ªÈÄâÊã©Âô®', color: '#4d79ff' },
            { type: 'class', code: '.button', name: 'Á±ªÈÄâÊã©Âô®', color: '#4d79ff' },
            { type: 'id', code: '#logo', name: 'IDÈÄâÊã©Âô®', color: '#4dff88' },
            { type: 'id', code: '#main', name: 'IDÈÄâÊã©Âô®', color: '#4dff88' },
            { type: 'attribute', code: '[type="text"]', name: 'Â±ûÊÄßÈÄâÊã©Âô®', color: '#ffa64d' },
            { type: 'attribute', code: '[href="#"]', name: 'Â±ûÊÄßÈÄâÊã©Âô®', color: '#ffa64d' },
            { type: 'pseudo', code: ':hover', name: '‰º™Á±ªÈÄâÊã©Âô®', color: '#b84dff' },
            { type: 'pseudo', code: ':first-child', name: '‰º™Á±ªÈÄâÊã©Âô®', color: '#b84dff' }
        ];

        const allSpirits = [
            { type: 'element', name: '&lt;p&gt;Ê†áÁ≠æÁ≤æÁÅµ', code: '&lt;p&gt;ÊñáÊú¨ÂÜÖÂÆπ&lt;/p&gt;', icon: 'üìÑ', selector: 'p' },
            { type: 'element', name: '&lt;h1&gt;Ê†áÁ≠æÁ≤æÁÅµ', code: '&lt;h1&gt;Ê†áÈ¢ò&lt;/h1&gt;', icon: 'üî§', selector: 'h1' },
            { type: 'element', name: '&lt;div&gt;Ê†áÁ≠æÁ≤æÁÅµ', code: '&lt;div&gt;Âå∫Âùó&lt;/div&gt;', icon: 'üì¶', selector: 'div' },
            { type: 'element', name: '&lt;span&gt;Ê†áÁ≠æÁ≤æÁÅµ', code: '&lt;span&gt;ÂÜÖËÅî&lt;/span&gt;', icon: 'üîó', selector: 'span' },
            { type: 'element', name: '&lt;a&gt;Ê†áÁ≠æÁ≤æÁÅµ', code: '&lt;a href="#"&gt;ÈìæÊé•&lt;/a&gt;', icon: 'üîó', selector: 'a' },
            { type: 'class', name: '.activeÁ±ªÁ≤æÁÅµ', code: '&lt;div class="active"&gt;Âå∫Âùó&lt;/div&gt;', icon: 'üî∑', selector: '.active' },
            { type: 'class', name: '.containerÁ±ªÁ≤æÁÅµ', code: '&lt;div class="container"&gt;ÂÆπÂô®&lt;/div&gt;', icon: 'üì¶', selector: '.container' },
            { type: 'class', name: '.buttonÁ±ªÁ≤æÁÅµ', code: '&lt;button class="button"&gt;ÊåâÈíÆ&lt;/button&gt;', icon: 'üîò', selector: '.button' },
            { type: 'id', name: '#logo IDÁ≤æÁÅµ', code: '&lt;img id="logo" src="..."&gt;', icon: 'üÜî', selector: '#logo' },
            { type: 'id', name: '#main IDÁ≤æÁÅµ', code: '&lt;main id="main"&gt;‰∏ª‰Ωì&lt;/main&gt;', icon: 'üìÑ', selector: '#main' },
            { type: 'attribute', name: '[type="text"]Á≤æÁÅµ', code: '&lt;input type="text"&gt;', icon: '‚å®Ô∏è', selector: '[type="text"]' },
            { type: 'attribute', name: '[href="#"]Á≤æÁÅµ', code: '&lt;a href="#"&gt;ÈìæÊé•&lt;/a&gt;', icon: 'üîó', selector: '[href="#"]' },
            { type: 'pseudo', name: ':hoverÁä∂ÊÄÅÁ≤æÁÅµ', code: '&lt;button&gt;ÊÇ¨ÂÅúÊåâÈíÆ&lt;/button&gt;', icon: 'üñ±Ô∏è', selector: ':hover' },
            { type: 'pseudo', name: ':first-childÁ≤æÁÅµ', code: '&lt;li&gt;Á¨¨‰∏Ä‰∏™Â≠êÈ°π&lt;/li&gt;', icon: '1Ô∏è‚É£', selector: ':first-child' }
        ];

        // ÂØºËà™ÂàáÊç¢
        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');
            const gameContents = document.querySelectorAll('.game-content');
            
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const gameId = button.dataset.game;
                    
                    // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Êõ¥Êñ∞Ê∏∏ÊàèÂÜÖÂÆπÊòæÁ§∫
                    gameContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(gameId).classList.add('active');
                    
                    // Êõ¥Êñ∞ÂÖ®Â±ÄÁä∂ÊÄÅ
                    globalState.currentGame = gameId;
                    updateGlobalUI();
                    
                    // Êõ¥Êñ∞ÂΩìÂâçÊ∏∏ÊàèÊòæÁ§∫
                    document.getElementById('current-game').textContent = 
                        gameId === 'css-valley' ? 'CSSË∞∑' : 
                        gameId === 'selector-maze' ? 'ÈÄâÊã©Âô®Ëø∑ÂÆ´' : 'È™åËØÅÁ•ûÊÆø';
                        
                    // Â¶ÇÊûúÂàáÊç¢Âà∞ÈÄâÊã©Âô®Ëø∑ÂÆ´ÔºåÁ°Æ‰øùÊ∏∏ÊàèÂ∑≤ÂàùÂßãÂåñ
                    if (gameId === 'selector-maze') {
                        initSelectorGame();
                    }
                    // Â¶ÇÊûúÂàáÊç¢Âà∞È™åËØÅÁ•ûÊÆøÔºåÁ°Æ‰øùÊ∏∏ÊàèÂ∑≤ÂàùÂßãÂåñ
                    else if (gameId === 'validation-temple') {
                        initValidationGame();
                    }
                });
            });
        }

        // Êõ¥Êñ∞ÂÖ®Â±ÄUI
        function updateGlobalUI() {
            document.getElementById('gold-count').textContent = globalState.goldCoins;
            
            // ËÆ°ÁÆóÊÄªËøõÂ∫¶
            const totalProgress = (cssValleyState.progress + selectorMazeState.progress + validationTempleState.progress) / 3;
            document.getElementById('progress').textContent = Math.round(totalProgress) + '%';
        }

        // ÂàõÂª∫‰ªôÂ•≥Èó™ÁÉÅÊïàÊûú
        function createSparkles() {
            const fairyAssistant = document.querySelector('.fairy-assistant');
            for (let i = 0; i < 5; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'fairy-sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                fairyAssistant.appendChild(sparkle);
            }
        }

        // Êõ¥Êñ∞CSSÈ¢ÑËßà
        function updatePreview() {
            const code = document.getElementById('css-code').value;
            const preview = document.getElementById('css-preview');
            
            try {
                // ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂divÊù•ÂÆâÂÖ®Âú∞Ê∏≤ÊüìCSS
                const tempDiv = document.createElement('div');
                
                // ÂàõÂª∫Á§∫‰æãHTMLÁªìÊûÑ
                const htmlStructure = `
                    <div class="container">
                        <nav class="navbar">
                            <div class="logo">CSSË∞∑</div>
                            <ul class="nav-links">
                                <li><a href="#">È¶ñÈ°µ</a></li>
                                <li><a href="#">ÂÖ≥‰∫é</a></li>
                                <li><a href="#">ÊúçÂä°</a></li>
                                <li><a href="#">ËÅîÁ≥ª</a></li>
                            </ul>
                        </nav>
                        
                        <div class="cards">
                            <div class="card">
                                <h3>FlexboxÂ∏ÉÂ±Ä</h3>
                                <p>‰∏ÄÁª¥Â∏ÉÂ±ÄËß£ÂÜ≥ÊñπÊ°à</p>
                            </div>
                            <div class="card">
                                <h3>ÂìçÂ∫îÂºèËÆæËÆ°</h3>
                                <p>Â§öËÆæÂ§áÈÄÇÈÖç</p>
                            </div>
                            <div class="card">
                                <h3>CSSÂä®Áîª</h3>
                                <p>ÁîüÂä®ÁöÑ‰∫§‰∫íÊïàÊûú</p>
                            </div>
                        </div>
                    </div>
                `;
                
                // Ê∏ÖÁêÜÈ¢ÑËßàÂå∫Âüü
                preview.innerHTML = htmlStructure;
                
                // Ê∑ªÂä†CSSÊ†∑Âºè
                const style = document.createElement('style');
                style.textContent = code;
                preview.appendChild(style);
                
                // Ê∑ªÂä†‰∏Ä‰∫õÂü∫Á°ÄÊ†∑Âºè‰ΩøÈ¢ÑËßàÊõ¥ÁæéËßÇ
                const baseStyle = document.createElement('style');
                baseStyle.textContent = `
                    #css-preview * {
                        box-sizing: border-box;
                        margin: 0;
                        padding: 0;
                    }
                    #css-preview .container {
                        font-family: Arial, sans-serif;
                    }
                    #css-preview .navbar {
                        background: #1a3a5f;
                        padding: 15px;
                        margin-bottom: 20px;
                    }
                    #css-preview .logo {
                        color: white;
                        font-weight: bold;
                        font-size: 1.2em;
                    }
                    #css-preview .nav-links {
                        list-style: none;
                        margin-top: 10px;
                    }
                    #css-preview .nav-links li {
                        display: inline-block;
                        margin-right: 15px;
                    }
                    #css-preview .nav-links a {
                        color: #b8b8ff;
                        text-decoration: none;
                    }
                    #css-preview .cards {
                        display: flex;
                        gap: 15px;
                    }
                    #css-preview .card {
                        background: rgba(255, 255, 255, 0.1);
                        padding: 15px;
                        border-radius: 5px;
                        flex: 1;
                    }
                    #css-preview .card h3 {
                        color: #00ffaa;
                        margin-bottom: 8px;
                    }
                    #css-preview .card p {
                        color: #b8b8ff;
                        font-size: 0.9em;
                    }
                `;
                preview.appendChild(baseStyle);
                
            } catch (error) {
                preview.innerHTML = `<p style="color: #ff0000;">È¢ÑËßàÊ∏≤ÊüìÈîôËØØ: ${error.message}</p>`;
            }
        }

        // ‰ªôÂ•≥Â∏ÆÂä©Á≥ªÁªü
        function getHelp(level) {
            if (globalState.goldCoins < level) {
                alert('ÈáëÂ∏Å‰∏çË∂≥ÔºÅËØ∑ÂÆåÊàêÊõ¥Â§ö‰ªªÂä°Êù•Ëé∑ÂèñÈáëÂ∏Å„ÄÇ');
                return;
            }

            globalState.goldCoins -= level;
            updateGlobalUI();

            const response = document.getElementById('fairy-response');
            let helpMessage = '';

            switch(level) {
                case 1:
                    helpMessage = `
                    üí° <strong>CSSÂ∏ÉÂ±ÄÊèêÁ§∫Ôºö</strong>
                    <ul>
                        <li>Flexbox: display: flex, justify-content, align-items</li>
                        <li>ÂìçÂ∫îÂºè: @media (max-width: 768px) { ... }</li>
                        <li>Âä®Áîª: transition, transform, @keyframes</li>
                        <li>Âç°ÁâáÂ∏ÉÂ±Ä: flex-wrap, gap, flex-basis</li>
                    </ul>
                    `;
                    break;
                case 2:
                    helpMessage = `
                    üéØ <strong>Â∏ÉÂ±ÄÊÄùË∑ØÔºö</strong>
                    <ol>
                        <li>ÂØºËà™Ê†è‰ΩøÁî®flexÂ∏ÉÂ±ÄÂÆûÁé∞Ê∞¥Âπ≥ÊéíÂàó</li>
                        <li>Âç°ÁâáÂÆπÂô®‰ΩøÁî®flex-wrapÂÆûÁé∞ÂìçÂ∫îÂºèÊç¢Ë°å</li>
                        <li>‰ΩøÁî®Â™í‰ΩìÊü•ËØ¢ÈÄÇÈÖçÁßªÂä®Á´ØÂ∏ÉÂ±ÄÂèòÂåñ</li>
                        <li>Ê∑ªÂä†hoverÊïàÊûúÂ¢ûÂº∫‰∫§‰∫íÊÄß</li>
                        <li>Á°Æ‰øùÈ¢úËâ≤Êê≠ÈÖçÁ¨¶ÂêàËµõÂçöÊúãÂÖãÈ£éÊ†º</li>
                    </ol>
                    `;
                    break;
                case 3:
                    helpMessage = `
                    üîß <strong>ÂÆåÊï¥CSS‰ª£Á†ÅÁ§∫‰æãÔºö</strong>
                    <div class="code-snippet">
/* CSSË∞∑Ê†∑ÂºèÊåëÊàò */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* ÂØºËà™Ê†èÊ†∑Âºè - ‰ΩøÁî®FlexboxÂ∏ÉÂ±Ä */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1a3a5f;
    padding: 15px 20px;
    border-radius: 8px;
}

.nav-links {
    display: flex;
    list-style: none;
    gap: 20px;
}

.nav-links a {
    color: #b8b8ff;
    text-decoration: none;
    transition: color 0.3s;
}

.nav-links a:hover {
    color: #00ffaa;
    text-shadow: 0 0 10px #00ffaa;
}

/* Âç°ÁâáÂ∏ÉÂ±Ä */
.cards {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 30px;
}

.card {
    flex: 1 1 300px;
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #00c8ff;
    transition: transform 0.3s, box-shadow 0.3s;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 200, 255, 0.5);
}

.card h3 {
    color: #00ffaa;
    margin-bottom: 10px;
}

.card p {
    color: #b8b8ff;
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
    .navbar {
        flex-direction: column;
        gap: 15px;
    }
    
    .nav-links {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }
    
    .card {
        flex: 1 1 100%;
    }
}
                    </div>
                    <button class="insert-code-btn" onclick="insertFullCode()">ÊèíÂÖ•ÂÆåÊï¥‰ª£Á†Å</button>
                    `;
                    break;
            }

            response.innerHTML = helpMessage;
            response.style.display = 'block';
            
            // Ê∑ªÂä†‰ªôÂ•≥ÁâπÊïà
            createSparkles();
        }

        // ÊèíÂÖ•ÂÆåÊï¥‰ª£Á†Å
        function insertFullCode() {
            const fullCode = `/* CSSË∞∑Ê†∑ÂºèÊåëÊàò */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* ÂØºËà™Ê†èÊ†∑Âºè - ‰ΩøÁî®FlexboxÂ∏ÉÂ±Ä */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1a3a5f;
    padding: 15px 20px;
    border-radius: 8px;
}

.nav-links {
    display: flex;
    list-style: none;
    gap: 20px;
}

.nav-links a {
    color: #b8b8ff;
    text-decoration: none;
    transition: color 0.3s;
}

.nav-links a:hover {
    color: #00ffaa;
    text-shadow: 0 0 10px #00ffaa;
}

/* Âç°ÁâáÂ∏ÉÂ±Ä */
.cards {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 30px;
}

.card {
    flex: 1 1 300px;
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #00c8ff;
    transition: transform 0.3s, box-shadow 0.3s;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 200, 255, 0.5);
}

.card h3 {
    color: #00ffaa;
    margin-bottom: 10px;
}

.card p {
    color: #b8b8ff;
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
    .navbar {
        flex-direction: column;
        gap: 15px;
    }
    
    .nav-links {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }
    
    .card {
        flex: 1 1 100%;
    }
}`;
            
            document.getElementById('css-code').value = fullCode;
            updatePreview();
            
            // ÈöêËóè‰ªôÂ•≥ÂìçÂ∫î
            document.getElementById('fairy-response').style.display = 'none';
            
            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            showCssFeedback('ÂÆåÊï¥‰ª£Á†ÅÂ∑≤ÊèíÂÖ•Âà∞ÁºñËæëÂô®‰∏≠ÔºÅ', 'success');
        }

        // ÊµãËØï‰ª£Á†Å
        function testCode() {
            const code = document.getElementById('css-code').value;
            updatePreview();
            
            try {
                // È™åËØÅCSSÁâπÊÄß
                let score = 0;
                const features = [
                    { test: 'display:\\s*flex', points: 20, name: 'FlexboxÂ∏ÉÂ±Ä' },
                    { test: '@media', points: 20, name: 'ÂìçÂ∫îÂºèËÆæËÆ°' },
                    { test: 'flex-wrap', points: 20, name: 'FlexÊç¢Ë°å' },
                    { test: 'transition', points: 20, name: 'ËøáÊ∏°Âä®Áîª' },
                    { test: 'transform', points: 20, name: 'ÂèòÊç¢ÊïàÊûú' }
                ];
                
                features.forEach(feature => {
                    if (new RegExp(feature.test).test(code)) {
                        score += feature.points;
                    }
                });
                
                cssValleyState.progress = Math.max(cssValleyState.progress, score);
                updateGlobalUI();
                
                if (score >= 60) {
                    // Êõ¥Êñ∞Âú∫ÊôØÈ¢ÑËßà
                    const sceneContent = document.querySelector('.scene-content');
                    sceneContent.innerHTML = `
                        <h3>‚úÖ ‰ª£Á†ÅÈ™åËØÅÈÄöËøáÔºÅ</h3>
                        <p>CSSÊ†∑ÂºèÂü∫Êú¨Ê≠£Á°ÆÔºåÂ∏ÉÂ±ÄÂºÄÂßãÊÅ¢Â§çÁß©Â∫è...</p>
                        <p>CSSÁîüÁâ©ÁöÑÂäõÈáèÊ≠£Âú®Â¢ûÂº∫ÔºÅ</p>
                    `;
                    showCssFeedback('‰ª£Á†ÅÈ™åËØÅÈÄöËøáÔºÅCSSÊ†∑ÂºèÊ≠£Á°Æ„ÄÇ', 'success');
                } else {
                    showCssFeedback(`‰ª£Á†ÅËøòÈúÄÂÆåÂñÑÔºåÂΩìÂâçÊ£ÄÊµãÂà∞ ${score}% ÁöÑÂÖ≥ÈîÆÁâπÊÄß`, 'error');
                }
                
            } catch (error) {
                showCssFeedback(`‚ùå ÂèëÁé∞ÈîôËØØÔºö${error.message}`, 'error');
            }
        }

        // Êèê‰∫§‰ª£Á†Å
        function submitCode() {
            const code = document.getElementById('css-code').value;
            
            // ÁªºÂêàÈ™åËØÅ
            const requiredFeatures = [
                'display:\\s*flex',
                'justify-content',
                '@media',
                'flex-wrap',
                'transition'
            ];
            
            let featureCount = 0;
            requiredFeatures.forEach(feature => {
                if (new RegExp(feature).test(code)) featureCount++;
            });

            if (featureCount >= 3 && cssValleyState.progress >= 60) {
                cssValleyState.progress = 100;
                updateGlobalUI();
                document.getElementById('completion-badge').innerHTML = `
                    ‚úÖ Ê†∑Âºè‰øÆÂ§çÂÆåÊàêÔºÅÂáÜÂ§áÂâçÂæÄ‰∏ã‰∏ÄÂÖ≥...
                    <br>
                    <button class="next-game-btn" onclick="window.location.href='JavaScript.html'">
                        üöÄ ÂâçÂæÄ JavaScript ÂÜíÈô©
                    </button>
                `;
                document.getElementById('completion-badge').style.display = 'block';
                
                // Êõ¥Êñ∞Âú∫ÊôØÔºåÊòæÁ§∫ËÉúÂà©
                const sceneContent = document.querySelector('.scene-content');
                sceneContent.innerHTML = `
                    <h3 style="color: #00ffaa;">üéâ ÊÅ≠ÂñúÔºÅCSSË∞∑ÊÅ¢Â§çÁß©Â∫èÔºÅ</h3>
                    <p>‰Ω†ÊàêÂäü‰øÆÂ§ç‰∫ÜCSSÂ∏ÉÂ±ÄÔºåÊâÄÊúâÂÖÉÁ¥†ÈÉΩÊÅ¢Â§ç‰∫ÜÊ≠£Â∏∏ÔºÅ</p>
                    <p>CSSÁîüÁâ©Áé∞Âú®ÈùûÂ∏∏ÂºÄÂøÉÔºÅ</p>
                    <button class="next-game-btn" onclick="window.location.href='JavaScript.html'">
                        üöÄ ÂâçÂæÄ JavaScript ÂÜíÈô©
                    </button>
                `;
                
                // Êõ¥Êñ∞ËßíËâ≤ÂÆπÂô®ÔºåÊòæÁ§∫ËÉúÂà©Âú∫ÊôØ
                const characterContainer = document.querySelector('.character-container');
                characterContainer.innerHTML = `
                    <div class="css-wizard" style="filter: drop-shadow(0 0 15px #00ffaa);">üßô‚Äç‚ôÇÔ∏è‚ú®</div>
                    <div class="css-creature" style="filter: drop-shadow(0 0 15px #00c8ff);">üêôüåü</div>
                `;
                
                // Â•ñÂä±ÈáëÂ∏Å
                globalState.goldCoins += 5;
                updateGlobalUI();
                
                showCssFeedback('üéâ ÊÅ≠ÂñúÔºÅ‰Ω†ÊàêÂäüÂÆåÊàê‰∫ÜCSSË∞∑ÁöÑÊåëÊàòÔºÅ', 'success');
                
                setTimeout(() => {
                    alert('üéâ ÊÅ≠ÂñúÔºÅ‰Ω†ÊàêÂäüÂÆåÊàê‰∫ÜCSSË∞∑ÁöÑÊåëÊàòÔºÅ\nËé∑Âæó5ÈáëÂ∏ÅÂ•ñÂä±ÔºÅ\n\nÁÇπÂáª"ÂâçÂæÄ JavaScript ÂÜíÈô©"ÊåâÈíÆÁªßÁª≠Â≠¶‰π†ÔºÅ');
                }, 2000);
            } else {
                showCssFeedback(`ËøòÈúÄË¶ÅÂÆåÂñÑ‰ª£Á†ÅÔºÅÂΩìÂâçËøõÂ∫¶: ${cssValleyState.progress}%\nÁ°Æ‰øùÂÆûÁé∞‰∏ªË¶ÅCSSÁâπÊÄß„ÄÇ`, 'error');
            }
        }

        // ÈáçÁΩÆ‰ª£Á†Å
        function resetCode() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆCSS‰ª£Á†ÅÂêóÔºü')) {
                document.getElementById('css-code').value = `/* CSSË∞∑Ê†∑ÂºèÊåëÊàò */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* ÂØºËà™Ê†èÊ†∑Âºè - ‰ΩøÁî®FlexboxÂ∏ÉÂ±Ä */
.navbar {
    /* Âú®ËøôÈáåÊ∑ªÂä†FlexboxÊ†∑Âºè */
}

.nav-links {
    /* ÂØºËà™ÈìæÊé•Ê†∑Âºè */
}

.nav-links a {
    /* ÈìæÊé•Ê†∑Âºè */
}

/* Âç°ÁâáÂ∏ÉÂ±Ä */
.cards {
    /* Âç°ÁâáÂÆπÂô®Â∏ÉÂ±Ä */
}

.card {
    /* Âçï‰∏™Âç°ÁâáÊ†∑Âºè */
}

.card:hover {
    /* Âç°ÁâáÊÇ¨ÂÅúÊïàÊûú */
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 768px) {
    /* ÁßªÂä®Á´ØÊ†∑Âºè */
}`;
                cssValleyState.progress = 0;
                updateGlobalUI();
                updatePreview();
                document.querySelector('.scene-content').innerHTML = `
                    <h3>Ê¨¢ËøéÊù•Âà∞CSSË∞∑ÔºÅ</h3>
                    <p>CSSÈ≠îÊ≥ïÂá∫Áé∞‰∫ÜÊ∑∑‰π±ÔºÅ‰ΩøÁî®CSSÂ∏ÉÂ±Ä‰øÆÂ§çÊ†∑ÂºèÈóÆÈ¢ò...</p>
                `;
                
                // ÈáçÁΩÆËßíËâ≤ÂÆπÂô®
                const characterContainer = document.querySelector('.character-container');
                characterContainer.innerHTML = `
                    <div class="css-wizard">üßô‚Äç‚ôÇÔ∏è</div>
                    <div class="css-creature">üêô</div>
                `;
                
                showCssFeedback('‰ª£Á†ÅÂ∑≤ÈáçÁΩÆÔºåÂèØ‰ª•ÈáçÊñ∞ÂºÄÂßãÊåëÊàòÔºÅ', 'success');
            }
        }

        // ÊòæÁ§∫CSSË∞∑ÂèçÈ¶àÊ∂àÊÅØ
        function showCssFeedback(message, type) {
            // ÂàõÂª∫ÊàñËé∑ÂèñÂèçÈ¶àÂÖÉÁ¥†
            let feedback = document.getElementById('action-feedback');
            if (!feedback) {
                feedback = document.createElement('div');
                feedback.id = 'action-feedback';
                feedback.className = 'feedback-message';
                document.querySelector('.controls').parentNode.insertBefore(feedback, document.querySelector('.controls'));
            }
            
            feedback.textContent = message;
            feedback.className = 'feedback-message';
            feedback.classList.add(type === 'success' ? 'feedback-success' : 'feedback-error');
            feedback.style.display = 'block';
            
            setTimeout(() => {
                feedback.style.display = 'none';
            }, 3000);
        }

        // ÈÄâÊã©Âô®Ëø∑ÂÆ´Ê∏∏ÊàèÂáΩÊï∞
        // ÂàùÂßãÂåñÈÄâÊã©Âô®Ëø∑ÂÆ´Ê∏∏Êàè
        function initSelectorGame() {
            // Á°Æ‰øùDOMÂÖÉÁ¥†Â≠òÂú®
            if (!document.getElementById('spirit-container') || 
                !document.getElementById('selector-cards') || 
                !document.getElementById('target-styles')) {
                console.log('Á≠âÂæÖDOMÂÖÉÁ¥†Âä†ËΩΩ...');
                setTimeout(initSelectorGame, 100);
                return;
            }
            
            console.log('ÂàùÂßãÂåñÈÄâÊã©Âô®Ëø∑ÂÆ´Ê∏∏Êàè...');
            generateSelectorLevel();
            updateSelectorUI();
            setupSelectorDragAndDrop();
        }

        // ÁîüÊàêÈÄâÊã©Âô®Ëø∑ÂÆ´ÂÖ≥Âç°
        function generateSelectorLevel() {
            // Ê∏ÖÁ©∫Áé∞ÊúâÂÜÖÂÆπ
            const spiritContainer = document.getElementById('spirit-container');
            const selectorCards = document.getElementById('selector-cards');
            const targetStyles = document.getElementById('target-styles');
            
            if (!spiritContainer || !selectorCards || !targetStyles) {
                console.error('DOMÂÖÉÁ¥†Êú™ÊâæÂà∞');
                return;
            }
            
            spiritContainer.innerHTML = '';
            selectorCards.innerHTML = '';
            targetStyles.innerHTML = '<p style="font-size: 12px; margin-bottom: 6px;"><strong>ÁõÆÊ†áÊ†∑ÂºèÔºö</strong></p>';
            
            // ÈáçÁΩÆÂåπÈÖçÁä∂ÊÄÅ
            selectorMazeState.matchedSpirits = 0;
            selectorMazeState.spiritMatches = {};
            selectorMazeState.currentSpirits = [];
            selectorMazeState.currentSelectors = [];
            
            // ÈöèÊú∫ÈÄâÊã©5‰∏™Á≤æÁÅµ
            const shuffledSpirits = [...allSpirits].sort(() => Math.random() - 0.5);
            const selectedSpirits = shuffledSpirits.slice(0, 5);
            
            // ÁîüÊàêÁ≤æÁÅµÂíåÂØπÂ∫îÁöÑÈÄâÊã©Âô®
            selectedSpirits.forEach((spirit, index) => {
                selectorMazeState.currentSpirits.push(spirit);
                selectorMazeState.spiritMatches[spirit.selector] = false;
                
                // ÂàõÂª∫Á≤æÁÅµÂÖÉÁ¥†
                const spiritElement = document.createElement('div');
                spiritElement.className = 'spirit';
                spiritElement.id = `spirit-${index}`;
                spiritElement.dataset.type = spirit.type;
                spiritElement.innerHTML = `
                    <div class="spirit-icon">${spirit.icon}</div>
                    <div class="spirit-info">
                        <div class="spirit-name">${spirit.name}</div>
                        <div class="spirit-code">${spirit.code}</div>
                    </div>
                    <div class="spirit-dropzone" data-target="${spirit.selector}"></div>
                `;
                spiritContainer.appendChild(spiritElement);
                
                // Ê∑ªÂä†ÁõÆÊ†áÊ†∑Âºè
                const targetItem = document.createElement('div');
                targetItem.className = 'target-item';
                const colorClass = getColorClass(spirit.type);
                targetItem.innerHTML = `
                    <div class="target-color ${colorClass}"></div>
                    <div>${spirit.name}</div>
                `;
                targetStyles.appendChild(targetItem);
                
                // Ê∑ªÂä†ÂØπÂ∫îÁöÑÈÄâÊã©Âô®Âç°Áâá
                const selector = allSelectors.find(s => s.code === spirit.selector);
                if (selector) {
                    selectorMazeState.currentSelectors.push(selector);
                    const selectorCard = document.createElement('div');
                    selectorCard.className = 'selector-card';
                    selectorCard.draggable = true;
                    selectorCard.dataset.selector = selector.code;
                    selectorCard.innerHTML = `
                        <div class="selector-name">${selector.name}</div>
                        <div class="selector-code">${selector.code} { ... }</div>
                    `;
                    selectorCards.appendChild(selectorCard);
                }
            });
            
            // Ê∑ªÂä†Âπ≤Êâ∞ÈÄâÊã©Âô®Ôºà5‰∏™Ôºâ
            const shuffledAllSelectors = [...allSelectors].sort(() => Math.random() - 0.5);
            const extraSelectors = shuffledAllSelectors
                .filter(s => !selectorMazeState.currentSelectors.some(cs => cs.code === s.code))
                .slice(0, 5);
            
            extraSelectors.forEach(selector => {
                const selectorCard = document.createElement('div');
                selectorCard.className = 'selector-card';
                selectorCard.draggable = true;
                selectorCard.dataset.selector = selector.code;
                selectorCard.innerHTML = `
                    <div class="selector-name">${selector.name}</div>
                    <div class="selector-code">${selector.code} { ... }</div>
                `;
                selectorCards.appendChild(selectorCard);
            });
            
            // Êâì‰π±ÈÄâÊã©Âô®È°∫Â∫è
            const cards = Array.from(selectorCards.children);
            cards.sort(() => Math.random() - 0.5);
            cards.forEach(card => selectorCards.appendChild(card));
        }

        // Ëé∑ÂèñÈ¢úËâ≤Á±ªÂêç
        function getColorClass(type) {
            const colorMap = {
                'element': 'red',
                'class': 'blue',
                'id': 'green',
                'attribute': 'orange',
                'pseudo': 'purple'
            };
            return colorMap[type] || 'cyan';
        }

        // Êõ¥Êñ∞ÈÄâÊã©Âô®Ëø∑ÂÆ´UI
        function updateSelectorUI() {
            const matchCount = document.getElementById('match-count');
            const scoreDisplay = document.getElementById('score');
            const currentLevel = document.getElementById('current-level');
            const levelDisplay = document.getElementById('level-display');
            const progressFill = document.getElementById('progress-fill');
            
            // Ê£ÄÊü•ÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®
            if (!matchCount || !scoreDisplay || !currentLevel || !levelDisplay || !progressFill) {
                console.log('Êõ¥Êñ∞UIÊó∂Êâæ‰∏çÂà∞DOMÂÖÉÁ¥†ÔºåÁ≠âÂæÖÈáçËØï...');
                return;
            }
            
            matchCount.textContent = `${selectorMazeState.matchedSpirits}/${selectorMazeState.totalSpirits}`;
            scoreDisplay.textContent = selectorMazeState.score;
            currentLevel.textContent = selectorMazeState.currentLevel;
            levelDisplay.textContent = selectorMazeState.currentLevel;
            
            // Êõ¥Êñ∞ËøõÂ∫¶Êù°
            const progress = (selectorMazeState.matchedSpirits / selectorMazeState.totalSpirits) * 100;
            progressFill.style.width = `${progress}%`;
            
            // Êõ¥Êñ∞ÂÖ®Â±ÄËøõÂ∫¶
            selectorMazeState.progress = progress;
            updateGlobalUI();
        }

        // ËÆæÁΩÆÈÄâÊã©Âô®ÊãñÊãΩÂäüËÉΩ
        function setupSelectorDragAndDrop() {
            const cards = document.querySelectorAll('.selector-card');
            const dropzones = document.querySelectorAll('.spirit-dropzone');
            
            // ËÆæÁΩÆÂç°ÁâáÂèØÊãñÊãΩ
            cards.forEach(card => {
                card.addEventListener('dragstart', handleSelectorDragStart);
                card.addEventListener('dragend', handleSelectorDragEnd);
            });
            
            // ËÆæÁΩÆÊîæÁΩÆÂå∫Âüü
            dropzones.forEach(zone => {
                zone.addEventListener('dragover', handleSelectorDragOver);
                zone.addEventListener('dragenter', handleSelectorDragEnter);
                zone.addEventListener('dragleave', handleSelectorDragLeave);
                zone.addEventListener('drop', handleSelectorDrop);
            });
        }

        // ÈÄâÊã©Âô®ÊãñÊãΩ‰∫ã‰ª∂Â§ÑÁêÜ
        function handleSelectorDragStart(e) {
            this.classList.add('dragging');
            e.dataTransfer.setData('text/plain', this.dataset.selector);
        }

        function handleSelectorDragEnd() {
            this.classList.remove('dragging');
        }

        function handleSelectorDragOver(e) {
            e.preventDefault();
        }

        function handleSelectorDragEnter(e) {
            e.preventDefault();
            this.classList.add('hover');
        }

        function handleSelectorDragLeave() {
            this.classList.remove('hover');
        }

        function handleSelectorDrop(e) {
            e.preventDefault();
            this.classList.remove('hover');
            
            const selector = e.dataTransfer.getData('text/plain');
            const targetSpirit = this.dataset.target;
            
            // Ê£ÄÊü•ÂåπÈÖçÊòØÂê¶Ê≠£Á°Æ
            checkSelectorMatch(selector, targetSpirit, this);
        }

        // Ê£ÄÊü•ÈÄâÊã©Âô®ÂåπÈÖç
        function checkSelectorMatch(selector, targetSpirit, dropzone) {
            const spiritElement = dropzone.closest('.spirit');
            const isCorrect = selector === targetSpirit;
            
            // ÊòæÁ§∫ÂåπÈÖçÂèçÈ¶à
            showSelectorMatchFeedback(isCorrect, spiritElement);
            
            if (isCorrect) {
                // Ê≠£Á°ÆÂåπÈÖç
                spiritElement.classList.add('correct');
                spiritElement.classList.remove('incorrect');
                dropzone.classList.add('correct');
                dropzone.textContent = selector;
                
                // Êõ¥Êñ∞Ê∏∏ÊàèÁä∂ÊÄÅ
                if (!selectorMazeState.spiritMatches[targetSpirit]) {
                    selectorMazeState.spiritMatches[targetSpirit] = true;
                    selectorMazeState.matchedSpirits++;
                    selectorMazeState.score += 30;
                }
                
                // Ê£ÄÊü•ÊòØÂê¶ÂÆåÊàêÊâÄÊúâÂåπÈÖç
                if (selectorMazeState.matchedSpirits === selectorMazeState.totalSpirits) {
                    setTimeout(() => {
                        showSelectorFeedback('üéâ ÊÅ≠ÂñúÔºÅ‰Ω†ÊàêÂäüÂÆåÊàê‰∫ÜËøô‰∏ÄÂÖ≥ÔºÅ', 'success');
                    }, 1000);
                }
            } else {
                // ÈîôËØØÂåπÈÖç
                spiritElement.classList.add('incorrect');
                spiritElement.classList.remove('correct');
                
                // Áü≠ÊöÇÊòæÁ§∫ÈîôËØØÂêéÊÅ¢Â§ç
                setTimeout(() => {
                    spiritElement.classList.remove('incorrect');
                }, 1000);
                
                // Êâ£ÂàÜ
                selectorMazeState.score = Math.max(0, selectorMazeState.score - 10);
            }
            
            updateSelectorUI();
        }

        // ÊòæÁ§∫ÈÄâÊã©Âô®ÂåπÈÖçÂèçÈ¶à
        function showSelectorMatchFeedback(isCorrect, spiritElement) {
            const feedback = document.createElement('div');
            feedback.className = `match-feedback ${isCorrect ? 'match-success' : 'match-error'}`;
            feedback.textContent = isCorrect ? 'ÂåπÈÖçÊàêÂäüÔºÅ' : 'ÂåπÈÖçÈîôËØØÔºÅ';
            
            spiritElement.appendChild(feedback);
            feedback.style.display = 'block';
            
            setTimeout(() => {
                feedback.remove();
            }, 1500);
        }

        // Ê£ÄÊü•ÊâÄÊúâÈÄâÊã©Âô®ÂåπÈÖç
        function checkAllSelectorMatches() {
            if (selectorMazeState.matchedSpirits === selectorMazeState.totalSpirits) {
                selectorMazeState.score += 50;
                showSelectorFeedback('üéâ ÊÅ≠ÂñúÔºÅ‰Ω†ÊàêÂäüÂÆåÊàê‰∫ÜËøô‰∏ÄÂÖ≥ÔºÅ', 'success');
            } else {
                const remaining = selectorMazeState.totalSpirits - selectorMazeState.matchedSpirits;
                showSelectorFeedback(`ËøòÈúÄË¶ÅÂåπÈÖç ${remaining} ‰∏™Á≤æÁÅµÊâçËÉΩÈÄöÂÖ≥ÔºÅ', 'error`);
            }
            
            updateSelectorUI();
        }

        // ÈÄâÊã©Âô®Ëø∑ÂÆ´‰∏ã‰∏ÄÂÖ≥
        function nextSelectorLevel() {
            if (selectorMazeState.matchedSpirits === selectorMazeState.totalSpirits) {
                if (selectorMazeState.currentLevel < selectorMazeState.maxLevels) {
                    selectorMazeState.currentLevel++;
                    generateSelectorLevel();
                    setupSelectorDragAndDrop();
                    showSelectorFeedback(`ËøõÂÖ•Á¨¨ ${selectorMazeState.currentLevel} ÂÖ≥ÔºÅ', 'success`);
                } else {
                    const completionBadge = document.getElementById('selector-completion-badge');
                    if (completionBadge) {
                        completionBadge.innerHTML = `
                            ‚úÖ ÊÅ≠ÂñúÔºÅ‰Ω†ÈÄöÂÖ≥‰∫ÜÊâÄÊúâÂÖ≥Âç°ÔºÅËé∑Âæó‰∫Ü"ÈÄâÊã©Âô®ÊçïÁΩë"ÈÅìÂÖ∑ÔºÅ
                            <br>
                            <button class="next-game-btn" onclick="window.location.href='JavaScript.html'">
                                üöÄ ÂâçÂæÄ JavaScript ÂÜíÈô©
                            </button>
                        `;
                        completionBadge.style.display = 'block';
                    }
                    showSelectorFeedback('üéâ ÊÅ≠ÂñúÔºÅ‰Ω†ÈÄöÂÖ≥‰∫ÜÊâÄÊúâÂÖ≥Âç°ÔºÅËé∑Âæó‰∫Ü"ÈÄâÊã©Âô®ÊçïÁΩë"ÈÅìÂÖ∑ÔºÅ', 'success');
                    
                    // Â•ñÂä±ÈáëÂ∏Å
                    globalState.goldCoins += 10;
                    updateGlobalUI();
                }
            } else {
                showSelectorFeedback('ËØ∑ÂÖàÂÆåÊàêÂΩìÂâçÂÖ≥Âç°ÁöÑÊâÄÊúâÂåπÈÖçÔºÅ', 'error');
            }
        }

        // ÈáçÁΩÆÈÄâÊã©Âô®Ê∏∏Êàè
        function resetSelectorGame() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊ∏∏ÊàèÂêóÔºü')) {
                // ÈáçÁΩÆÊâÄÊúâÁ≤æÁÅµÁä∂ÊÄÅ
                const spirits = document.querySelectorAll('.spirit');
                spirits.forEach(spirit => {
                    spirit.classList.remove('correct', 'incorrect');
                });
                
                // ÈáçÁΩÆÊâÄÊúâÊîæÁΩÆÂå∫Âüü
                const dropzones = document.querySelectorAll('.spirit-dropzone');
                dropzones.forEach(zone => {
                    zone.classList.remove('correct', 'hover');
                    zone.textContent = '';
                });
                
                // ÈáçÁΩÆÊ∏∏ÊàèÁä∂ÊÄÅ
                selectorMazeState.matchedSpirits = 0;
                selectorMazeState.score = 0;
                selectorMazeState.currentLevel = 1;
                selectorMazeState.spiritMatches = {};
                
                const completionBadge = document.getElementById('selector-completion-badge');
                if (completionBadge) {
                    completionBadge.style.display = 'none';
                }
                generateSelectorLevel();
                setupSelectorDragAndDrop();
                showSelectorFeedback('Ê∏∏ÊàèÂ∑≤ÈáçÁΩÆÔºåÈáçÊñ∞ÂºÄÂßãÊåëÊàòÔºÅ', 'success');
                updateSelectorUI();
            }
        }

        // ÊòæÁ§∫ÈÄâÊã©Âô®Ëø∑ÂÆ´ÂèçÈ¶àÊ∂àÊÅØ
        function showSelectorFeedback(message, type) {
            const feedbackMessage = document.getElementById('selector-feedback-message');
            if (!feedbackMessage) {
                console.error('ÂèçÈ¶àÊ∂àÊÅØÂÖÉÁ¥†Êú™ÊâæÂà∞');
                return;
            }
            
            feedbackMessage.textContent = message;
            feedbackMessage.className = 'selector-feedback-message';
            feedbackMessage.classList.add(type === 'success' ? 'selector-feedback-success' : 'selector-feedback-error');
            feedbackMessage.style.display = 'block';
            
            setTimeout(() => {
                feedbackMessage.style.display = 'none';
            }, 3000);
        }

        // È™åËØÅÁ•ûÊÆøÊ∏∏ÊàèÂáΩÊï∞
        // ÂàùÂßãÂåñÈ™åËØÅÁ•ûÊÆøÊ∏∏Êàè
        function initValidationGame() {
            // ËÆæÁΩÆÈ™åËØÅÈÄâÈ°πÂç°
            setupValidationTabs();
            
            // Êõ¥Êñ∞È™åËØÅUI
            updateValidationUI();
            
            // ËÆæÁΩÆÈ™åËØÅÂ§çÈÄâÊ°Ü‰∫ã‰ª∂ÁõëÂê¨
            setupValidationCheckboxes();
        }

        // ËÆæÁΩÆÈ™åËØÅÈÄâÈ°πÂç°
        function setupValidationTabs() {
            const tabs = document.querySelectorAll('.validation-tab');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Êõ¥Êñ∞ÈÄâÈ°πÂç°Áä∂ÊÄÅ
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Êõ¥Êñ∞ÂÜÖÂÆπÊòæÁ§∫
                    document.querySelectorAll('.validation-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabId).classList.add('active');
                    
                    // Êõ¥Êñ∞ÂΩìÂâçÈÄâÈ°πÂç°Áä∂ÊÄÅ
                    validationTempleState.currentTab = tabId;
                });
            });
        }

        // ËÆæÁΩÆÈ™åËØÅÂ§çÈÄâÊ°Ü‰∫ã‰ª∂ÁõëÂê¨
        function setupValidationCheckboxes() {
            const checkboxes = document.querySelectorAll('.validation-item input[type="checkbox"]');
            
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const listItem = this.closest('.validation-item');
                    
                    if (this.checked) {
                        listItem.classList.add('completed');
                        validationTempleState.completedChecks++;
                    } else {
                        listItem.classList.remove('completed');
                        validationTempleState.completedChecks--;
                    }
                    
                    // Êõ¥Êñ∞È™åËØÅËøõÂ∫¶
                    validationTempleState.progress = (validationTempleState.completedChecks / validationTempleState.totalChecks) * 100;
                    updateValidationUI();
                });
            });
        }

        // Êõ¥Êñ∞È™åËØÅUI
        function updateValidationUI() {
            // Êõ¥Êñ∞ËøõÂ∫¶Êù°
            document.getElementById('validation-progress-fill').style.width = `${validationTempleState.progress}%`;
            
            // Êõ¥Êñ∞ËøõÂ∫¶ÊñáÊú¨
            document.getElementById('validation-progress').textContent = `${Math.round(validationTempleState.progress)}%`;
            
            // Êõ¥Êñ∞ÂÖ≥Ê≥®Áä∂ÊÄÅ
            document.getElementById('validation-focus').textContent = validationTempleState.focus;
            
            // Êõ¥Êñ∞ÂÖ®Â±ÄËøõÂ∫¶
            globalState.validationTempleProgress = validationTempleState.progress;
            updateGlobalUI();
        }

        // ËøêË°åÈ™åËØÅ
        function runValidation() {
            // Ê®°ÊãüÈ™åËØÅËøáÁ®ã
            const progressFill = document.getElementById('validation-progress-fill');
            progressFill.style.width = '0%';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                progressFill.style.width = `${progress}%`;
                
                if (progress >= validationTempleState.progress) {
                    clearInterval(interval);
                    
                    if (validationTempleState.progress === 100) {
                        showValidationFeedback('‚úÖ ÊâÄÊúâÈ™åËØÅÈÄöËøáÔºÅÊÅ≠Âñú‰Ω†ÊéåÊè°‰∫ÜCSSÊ†∏ÂøÉÁü•ËØÜÔºÅ', 'success');
                    } else {
                        showValidationFeedback(`‚ö†Ô∏è È™åËØÅÂÆåÊàêÔºÅ${validationTempleState.completedChecks}/${validationTempleState.totalChecks} È°πÈÄöËøá`, 'success');
                    }
                }
            }, 100);
        }

        // ÂÆåÊàêÈ™åËØÅ‰ªªÂä°
        function completeValidation() {
            if (validationTempleState.progress === 100) {
                const completionBadge = document.getElementById('validation-completion-badge');
                completionBadge.innerHTML = `
                    ‚úÖ È™åËØÅÂÆåÊàêÔºÅÊÅ≠Âñú‰Ω†ÊéåÊè°‰∫ÜCSSÊ†∏ÂøÉÁü•ËØÜÔºÅ
                    <br>
                    <button class="next-game-btn" onclick="window.location.href='JavaScript.html'">
                        üöÄ ÂâçÂæÄ JavaScript ÂÜíÈô©
                    </button>
                `;
                completionBadge.style.display = 'block';
                
                // Êõ¥Êñ∞Á•ûÊÆøÂú∫ÊôØ
                const templeContent = document.querySelector('.temple-content');
                templeContent.innerHTML = `
                    <h3 style="color: #ff6b6b;">üéâ ÊÅ≠ÂñúÔºÅÁü•ËØÜÈ™åËØÅÈÄöËøáÔºÅ</h3>
                    <p>‰Ω†ÊàêÂäüÈ™åËØÅ‰∫ÜÂú®CSSË∞∑ÂíåÈÄâÊã©Âô®Ëø∑ÂÆ´‰∏≠Â≠¶Âà∞ÁöÑÁü•ËØÜÔºÅ</p>
                    <p>ÊâÄÊúâCSSÊ†∏ÂøÉÊ¶ÇÂøµÈÉΩÂ∑≤ÊéåÊè°ÔºÅ</p>
                    <button class="next-game-btn" onclick="window.location.href='JavaScript.html'">
                        üöÄ ÂâçÂæÄ JavaScript ÂÜíÈô©
                    </button>
                `;
                
                // Êõ¥Êñ∞ÂÆàÊä§ËÄÖ
                const templeGuardian = document.querySelector('.temple-guardian');
                templeGuardian.textContent = 'üóø‚ú®';
                templeGuardian.style.filter = 'drop-shadow(0 0 15px #ff6b6b)';
                
                // Â•ñÂä±ÈáëÂ∏Å
                globalState.goldCoins += 15;
                updateGlobalUI();
                
                showValidationFeedback('üéâ ÊÅ≠ÂñúÔºÅ‰Ω†ÊàêÂäüÂÆåÊàê‰∫ÜÁü•ËØÜÈ™åËØÅÔºÅËé∑Âæó15ÈáëÂ∏ÅÂ•ñÂä±ÔºÅ', 'success');
            } else {
                showValidationFeedback(`ËØ∑ÂÖàÂÆåÊàêÊâÄÊúâÈ™åËØÅÈ°πÁõÆÔºÅÂΩìÂâçÂÆåÊàê ${validationTempleState.completedChecks}/${validationTempleState.totalChecks}`, 'error');
            }
        }

        // ÈáçÁΩÆÈ™åËØÅÊ∏∏Êàè
        function resetValidationGame() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÈ™åËØÅÊ∏∏ÊàèÂêóÔºü')) {
                // ÈáçÁΩÆÊâÄÊúâÂ§çÈÄâÊ°Ü
                const checkboxes = document.querySelectorAll('.validation-item input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                    checkbox.closest('.validation-item').classList.remove('completed');
                });
                
                // ÈáçÁΩÆÊ∏∏ÊàèÁä∂ÊÄÅ
                validationTempleState.completedChecks = 0;
                validationTempleState.progress = 0;
                
                // Êõ¥Êñ∞UI
                updateValidationUI();
                
                // ÈöêËóèÂÆåÊàêÂæΩÁ´†
                document.getElementById('validation-completion-badge').style.display = 'none';
                
                // ÈáçÁΩÆÁ•ûÊÆøÂú∫ÊôØ
                const templeContent = document.querySelector('.temple-content');
                templeContent.innerHTML = `
                    <h3>Áü•ËØÜÈ™åËØÅ‰∏≠ÂøÉ</h3>
                    <p>Âú®ËøôÈáåÔºå‰Ω†Â∞ÜÈ™åËØÅÂú®CSSË∞∑ÂíåÈÄâÊã©Âô®Ëø∑ÂÆ´‰∏≠Â≠¶Âà∞ÁöÑÁü•ËØÜ</p>
                    <p>ËØÅÊòé‰Ω†Â∑≤ÁªèÊéåÊè°‰∫ÜÂÖ≥ÈîÆÁöÑCSSÊ¶ÇÂøµÔºÅ</p>
                    <div class="progress-bar" style="margin: 15px 0;">
                        <div class="progress-fill" id="validation-progress-fill" style="background: linear-gradient(90deg, #ff6b6b, #ff8e8e);"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <div>ÂÖ≥Ê≥®: <span id="validation-focus">1/3</span></div>
                        <div>ÈáëÂ∏Å: <span class="gold-coin">10</span> ü™ô</div>
                        <div>ËøõÂ∫¶: <span id="validation-progress">0%</span></div>
                    </div>
                `;
                
                // ÈáçÁΩÆÂÆàÊä§ËÄÖ
                const templeGuardian = document.querySelector('.temple-guardian');
                templeGuardian.textContent = 'üóø';
                templeGuardian.style.filter = 'drop-shadow(0 0 10px #ff6b6b)';
                
                showValidationFeedback('È™åËØÅÊ∏∏ÊàèÂ∑≤ÈáçÁΩÆÔºåÈáçÊñ∞ÂºÄÂßãÊåëÊàòÔºÅ', 'success');
            }
        }

        // È™åËØÅ‰ªôÂ•≥Â∏ÆÂä©Á≥ªÁªü
        function getValidationHelp(level) {
            if (globalState.goldCoins < level) {
                alert('ÈáëÂ∏Å‰∏çË∂≥ÔºÅËØ∑ÂÆåÊàêÊõ¥Â§ö‰ªªÂä°Êù•Ëé∑ÂèñÈáëÂ∏Å„ÄÇ');
                return;
            }

            globalState.goldCoins -= level;
            updateGlobalUI();

            const response = document.getElementById('validation-fairy-response');
            let helpMessage = '';

            // Ê†πÊçÆÂΩìÂâçÈÄâÈ°πÂç°Êèê‰æõ‰∏çÂêåÁöÑÂ∏ÆÂä©
            if (validationTempleState.currentTab === 'css-valley-validation') {
                switch(level) {
                    case 1:
                        helpMessage = `
                        üí° <strong>CSSÂ∏ÉÂ±ÄÊèêÁ§∫Ôºö</strong>
                        <ul>
                            <li>FlexboxÂ∏ÉÂ±Ä‰ΩøÁî®display: flexÂàõÂª∫ÁÅµÊ¥ªÁöÑÂ∏ÉÂ±Ä</li>
                            <li>‰ΩøÁî®justify-contentÂíåalign-itemsÊéßÂà∂ÂØπÈΩêÊñπÂºè</li>
                            <li>ÂìçÂ∫îÂºèËÆæËÆ°‰ΩøÁî®@mediaÊü•ËØ¢ÈÄÇÈÖç‰∏çÂêåÂ±èÂπïÂ∞∫ÂØ∏</li>
                            <li>CSSÂä®Áîª‰ΩøÁî®transitionÂíåtransformÂàõÂª∫Âπ≥ÊªëÊïàÊûú</li>
                        </ul>
                        `;
                        break;
                    case 2:
                        helpMessage = `
                        üéØ <strong>CSSÂ∏ÉÂ±ÄÊÄùË∑ØÔºö</strong>
                        <ol>
                            <li>Á°ÆÂÆöÂ∏ÉÂ±ÄÁ±ªÂûãÔºöFlexbox„ÄÅGridÊàñ‰º†ÁªüÂ∏ÉÂ±Ä</li>
                            <li>ËÆæÁΩÆÂÆπÂô®Â±ûÊÄßÔºödisplay„ÄÅflex-directionÁ≠â</li>
                            <li>ËÆæÁΩÆÈ°πÁõÆÂ±ûÊÄßÔºöflex„ÄÅorderÁ≠â</li>
                            <li>Ê∑ªÂä†ÂìçÂ∫îÂºèÊñ≠ÁÇπÔºö‰ΩøÁî®@mediaÊü•ËØ¢</li>
                            <li>ÊµãËØï‰∏çÂêåÂ±èÂπïÂ∞∫ÂØ∏ÁöÑÊòæÁ§∫ÊïàÊûú</li>
                        </ol>
                        `;
                        break;
                    case 3:
                        helpMessage = `
                        üîß <strong>CSSÂ∏ÉÂ±ÄÁ§∫‰æãÔºö</strong>
                        <div class="code-snippet">
/* FlexboxÂ∏ÉÂ±ÄÁ§∫‰æã */
.container {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

.item {
    flex: 1 1 200px;
    margin: 10px;
}

/* ÂìçÂ∫îÂºèËÆæËÆ°Á§∫‰æã */
@media (max-width: 768px) {
    .container {
        flex-direction: column;
    }
    
    .item {
        flex: 1 1 100%;
    }
}

/* CSSÂä®ÁîªÁ§∫‰æã */
.button {
    transition: all 0.3s ease;
    transform: scale(1);
}

.button:hover {
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}
                        </div>
                        `;
                        break;
                }
            } else {
                switch(level) {
                    case 1:
                        helpMessage = `
                        üí° <strong>CSSÈÄâÊã©Âô®ÊèêÁ§∫Ôºö</strong>
                        <ul>
                            <li>ÂÖÉÁ¥†ÈÄâÊã©Âô®Ôºöp„ÄÅdiv„ÄÅh1Á≠âHTMLÂÖÉÁ¥†</li>
                            <li>Á±ªÈÄâÊã©Âô®Ôºö.classnameÔºåÈÄâÊã©ÂÖ∑ÊúâÁâπÂÆöÁ±ªÁöÑÂÖÉÁ¥†</li>
                            <li>IDÈÄâÊã©Âô®Ôºö#idnameÔºåÈÄâÊã©ÂÖ∑ÊúâÁâπÂÆöIDÁöÑÂÖÉÁ¥†</li>
                            <li>Â±ûÊÄßÈÄâÊã©Âô®Ôºö[attribute=value]ÔºåÈÄâÊã©ÂÖ∑ÊúâÁâπÂÆöÂ±ûÊÄßÁöÑÂÖÉÁ¥†</li>
                            <li>‰º™Á±ªÈÄâÊã©Âô®Ôºö:hover„ÄÅ:first-childÁ≠âÔºåÈÄâÊã©ÁâπÂÆöÁä∂ÊÄÅÁöÑÂÖÉÁ¥†</li>
                        </ul>
                        `;
                        break;
                    case 2:
                        helpMessage = `
                        üéØ <strong>ÈÄâÊã©Âô®‰ΩøÁî®ÊÄùË∑ØÔºö</strong>
                        <ol>
                            <li>Á°ÆÂÆöË¶ÅÈÄâÊã©ÁöÑÂÖÉÁ¥†Á±ªÂûã</li>
                            <li>ÈÄâÊã©ÊúÄÂÖ∑‰ΩìÁöÑÈÄâÊã©Âô®Á±ªÂûã</li>
                            <li>ËÄÉËôëÈÄâÊã©Âô®ÁöÑ‰ºòÂÖàÁ∫ß</li>
                            <li>ÊµãËØïÈÄâÊã©Âô®ÊòØÂê¶ÂáÜÁ°ÆÈÄâ‰∏≠ÁõÆÊ†áÂÖÉÁ¥†</li>
                            <li>‰ºòÂåñÈÄâÊã©Âô®‰ª•ÊèêÈ´òÊÄßËÉΩ</li>
                        </ol>
                        `;
                        break;
                    case 3:
                        helpMessage = `
                        üîß <strong>CSSÈÄâÊã©Âô®Á§∫‰æãÔºö</strong>
                        <div class="code-snippet">
/* ÂÖÉÁ¥†ÈÄâÊã©Âô® */
p {
    color: blue;
}

/* Á±ªÈÄâÊã©Âô® */
.button {
    background: #ff6b6b;
    color: white;
}

/* IDÈÄâÊã©Âô® */
#header {
    height: 80px;
    background: #1a3a5f;
}

/* Â±ûÊÄßÈÄâÊã©Âô® */
input[type="text"] {
    border: 1px solid #ccc;
    padding: 5px;
}

/* ‰º™Á±ªÈÄâÊã©Âô® */
a:hover {
    color: #ff6b6b;
    text-decoration: underline;
}

li:first-child {
    font-weight: bold;
}
                        </div>
                        `;
                        break;
                }
            }

            response.innerHTML = helpMessage;
            response.style.display = 'block';
        }

        // ÊòæÁ§∫È™åËØÅÂèçÈ¶àÊ∂àÊÅØ
        function showValidationFeedback(message, type) {
            const feedbackMessage = document.getElementById('validation-feedback-message');
            if (!feedbackMessage) {
                console.error('È™åËØÅÂèçÈ¶àÊ∂àÊÅØÂÖÉÁ¥†Êú™ÊâæÂà∞');
                return;
            }
            
            feedbackMessage.textContent = message;
            feedbackMessage.className = 'validation-feedback-message';
            feedbackMessage.classList.add(type === 'success' ? 'validation-feedback-success' : 'validation-feedback-error');
            feedbackMessage.style.display = 'block';
            
            setTimeout(() => {
                feedbackMessage.style.display = 'none';
            }, 3000);
        }

        // Êñ∞ÊâãÂºïÂØºÂáΩÊï∞
        function startTutorial() {
            // ÊòæÁ§∫ÂºïÂØºË¶ÜÁõñÂ±ÇÂíåÂºπÂá∫Á™óÂè£
            document.getElementById('tutorial-overlay').style.display = 'block';
            document.getElementById('tutorial-popup').style.display = 'block';
            
            // ÊòæÁ§∫Á¨¨‰∏ÄÊ≠•
            showTutorialStep(0);
        }

        function showTutorialStep(stepIndex) {
            const step = tutorialState.steps[stepIndex];
            
            // Êõ¥Êñ∞ÂºïÂØºÂÜÖÂÆπ
            document.getElementById('tutorial-title').textContent = step.title;
            document.getElementById('tutorial-content').textContent = step.content;
            document.getElementById('tutorial-progress').textContent = `${stepIndex + 1}/${tutorialState.totalSteps}`;
            
            // Êõ¥Êñ∞È´ò‰∫Æ
            const highlight = document.getElementById('tutorial-highlight');
            if (step.highlight) {
                const element = document.querySelector(step.highlight);
                if (element) {
                    const rect = element.getBoundingClientRect();
                    highlight.style.width = `${rect.width + 20}px`;
                    highlight.style.height = `${rect.height + 20}px`;
                    highlight.style.top = `${rect.top - 10 + window.scrollY}px`;
                    highlight.style.left = `${rect.left - 10 + window.scrollX}px`;
                    highlight.style.display = 'block';
                }
            } else {
                highlight.style.display = 'none';
            }
            
            // Êõ¥Êñ∞ÂΩìÂâçÊ≠•È™§
            tutorialState.currentStep = stepIndex;
        }

        function nextTutorialStep() {
            if (tutorialState.currentStep < tutorialState.totalSteps - 1) {
                showTutorialStep(tutorialState.currentStep + 1);
            } else {
                // ÂÆåÊàêÂºïÂØº
                completeTutorial();
            }
        }

        function skipTutorial() {
            if (confirm('Á°ÆÂÆöË¶ÅË∑≥ËøáÊñ∞ÊâãÂºïÂØºÂêóÔºü')) {
                completeTutorial();
            }
        }

        function completeTutorial() {
            // ÈöêËóèÂºïÂØºÂÖÉÁ¥†
            document.getElementById('tutorial-overlay').style.display = 'none';
            document.getElementById('tutorial-popup').style.display = 'none';
            document.getElementById('tutorial-highlight').style.display = 'none';
            
            // Êõ¥Êñ∞Áä∂ÊÄÅ
            globalState.tutorialCompleted = true;
            
            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
            localStorage.setItem('cssAdventureTutorialCompleted', 'true');
        }

        // ÂàùÂßãÂåñ
        function init() {
            setupNavigation();
            updateGlobalUI();
            updatePreview();
            createSparkles();
            
            // Ê∑ªÂä†‰ª£Á†ÅÊõ¥ÊîπÁõëÂê¨
            document.getElementById('css-code').addEventListener('input', function() {
                updatePreview();
            });
            
            // ÂàùÂßãÂåñÈ™åËØÅÊ∏∏Êàè
            initValidationGame();
            
            // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊòæÁ§∫Êñ∞ÊâãÂºïÂØº
            const tutorialCompleted = localStorage.getItem('cssAdventureTutorialCompleted');
            if (!tutorialCompleted) {
                // Âª∂ËøüÊòæÁ§∫ÂºïÂØºÔºåËÆ©È°µÈù¢ÂÆåÂÖ®Âä†ËΩΩ
                setTimeout(startTutorial, 1000);
            }
            
            // ËÆæÁΩÆÂºïÂØºÊåâÈíÆ‰∫ã‰ª∂
            document.getElementById('tutorial-next').addEventListener('click', nextTutorialStep);
            document.getElementById('tutorial-skip').addEventListener('click', skipTutorial);
        }

        // ÂêØÂä®Ê∏∏Êàè
        init();
    </script>
</body>
</html>